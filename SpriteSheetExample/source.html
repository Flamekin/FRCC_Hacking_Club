<!DOCTYPE html>
<!-- saved from url=(0063)http://programarcadegames.com/python_examples/en/sprite_sheets/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 
 <title>Computer Science With Python and Pygame</title>

	<!-- Syntax Highlighter -->
	<link rel="stylesheet" type="text/css" href="./source_files/shCore.min.css">
	<link rel="stylesheet" type="text/css" href="./source_files/shThemeDefault.min.css">
	<script async="" src="./source_files/analytics.js"></script><script type="text/javascript" src="./source_files/shCore.js"></script><style type="text/css"></style>
	<script async="" type="text/javascript" src="./source_files/shBrushPython.min.js"></script>
	<script async="" type="text/javascript" src="./source_files/shBrushVb.min.js"></script>
	<script async="" type="text/javascript" src="./source_files/shBrushCpp.min.js"></script>
	<script async="" type="text/javascript" src="./source_files/shBrushPlain.min.js"></script>
	<script async="" type="text/javascript" src="./source_files/shBrushBash.min.js"></script>

	<!-- Bootstrap -->
	<link rel="stylesheet" type="text/css" href="./source_files/bootstrap.css">


 <link href="./source_files/mainbook.css" rel="stylesheet" type="text/css">
</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
        <a class="navbar-brand" href="http://programarcadegames.com/index.php"><span class="glyphicon glyphicon-home" aria-hidden="true"></span></a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a href="http://programarcadegames.com/python_examples/en/sprite_sheets/#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Chapters <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="http://programarcadegames.com/index.php?chapter=foreword&amp;lang=en">Before getting started...</a></li>
            <li><a href="http://programarcadegames.com/index.php?chapter=python_as_calculator&amp;lang=en">1: Create a Custom Calculator</a></li>
            <li><a href="http://programarcadegames.com/index.php?chapter=what_is_a_computer_language&amp;lang=en">2: What is a Computer Language?</a></li>
            <li><a href="http://programarcadegames.com/index.php?chapter=conditional_statements&amp;lang=en">3: Quiz Games and If Statements</a></li>
            <li><a href="http://programarcadegames.com/index.php?chapter=loops&amp;lang=en">4: Guessing Games with Random Numbers and Loops</a></li>
            <li><a href="http://programarcadegames.com/index.php?chapter=introduction_to_graphics&amp;lang=en">5: Introduction to Graphics</a></li>
            <li><a href="http://programarcadegames.com/index.php?chapter=back_to_looping&amp;lang=en">6: Back to Looping</a></li>
            <li><a href="http://programarcadegames.com/index.php?chapter=introduction_to_lists&amp;lang=en">7: Introduction to Lists</a></li>
            <li><a href="http://programarcadegames.com/index.php?chapter=introduction_to_animation&amp;lang=en">8: Introduction to Animation</a></li>
            <li><a href="http://programarcadegames.com/index.php?chapter=functions&amp;lang=en">9: Functions</a></li>
            <li><a href="http://programarcadegames.com/index.php?chapter=controllers_and_graphics&amp;lang=en">10: Controllers and Graphics</a></li>
            <li><a href="http://programarcadegames.com/index.php?chapter=bitmapped_graphics_and_sound&amp;lang=en">11: Bitmapped Graphics and Sound</a></li>
            <li><a href="http://programarcadegames.com/index.php?chapter=introduction_to_classes&amp;lang=en">12: Introduction to Classes</a></li>
            <li><a href="http://programarcadegames.com/index.php?chapter=introduction_to_sprites&amp;lang=en">13: Introduction to Sprites</a></li>
            <li><a href="http://programarcadegames.com/index.php?chapter=libraries&amp;lang=en">14: Libraries and Modules</a></li>
            <li><a href="http://programarcadegames.com/index.php?chapter=searching&amp;lang=en">15: Searching</a></li>
            <li><a href="http://programarcadegames.com/index.php?chapter=array_backed_grids&amp;lang=en">16: Array-Backed Grids</a></li>
            <li><a href="http://programarcadegames.com/index.php?chapter=sorting&amp;lang=en">17: Sorting</a></li>
            <li><a href="http://programarcadegames.com/index.php?chapter=exceptions&amp;lang=en">18: Exceptions</a></li>
            <li><a href="http://programarcadegames.com/index.php?chapter=recursion&amp;lang=en">19: Recursion</a></li>
            <li><a href="http://programarcadegames.com/index.php?chapter=formatting&amp;lang=en">20: Formatting</a></li>
            <li><a href="https://www.youtube.com/playlist?list=PL1D91F4E6E79E73E1">YouTube Playlist</a></li>
          </ul>
        </li>
      </ul>

      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a href="http://programarcadegames.com/index.php?chapter=example_code" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Examples <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="http://programarcadegames.com/index.php?chapter=example_code">Index of examples</a></li>
            <li class="dropdown-submenu">
              <a href="http://programarcadegames.com/index.php?chapter=example_code" class="dropdown-toggle" data-toggle="dropdown">Text Examples</a>
              <ul class="dropdown-menu">

                <li><a href="http://programarcadegames.com/python_examples/f.php?file=calculate_miles_per_gallon.py">calculate_miles_per_gallon.py</a></li>
                <li><a href="http://programarcadegames.com/python_examples/f.php?file=calculate_kinetic_energy.py">calculate_kinetic_energy.py</a></li>
                <li><a href="http://programarcadegames.com/python_examples/f.php?file=if_statement_examples.py">if_statement_examples.py</a></li>
                <li><a href="http://programarcadegames.com/python_examples/f.php?file=for_loop_examples.py">for_loop_examples.py</a></li>
                <li><a href="http://programarcadegames.com/python_examples/f.php?file=while_loop_examples.py">while_loop_examples.py</a></li>
                <li><a href="http://programarcadegames.com/python_examples/f.php?file=simple_encryption.py">simple_encryption.py</a></li>
                <li><a href="http://programarcadegames.com/python_examples/f.php?file=simple_decryption.py">simple_decryption.py</a></li>
                <li><a href="http://programarcadegames.com/python_examples/f.php?file=searching_example.py">searching_example.py</a></li>
                <li><a href="http://programarcadegames.com/python_examples/f.php?file=property_check_examples.py">property_check_examples.py</a></li>
              </ul>

            </li>
            <li class="dropdown-submenu">
              <a href="http://programarcadegames.com/index.php?chapter=example_code" class="dropdown-toggle" data-toggle="dropdown">Graphics Examples</a>
              <ul class="dropdown-menu">
<li><a href="http://programarcadegames.com/python_examples/f.php?file=pygame_base_template.py">pygame_base_template.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=simple_graphics_demo.py">simple_graphics_demo.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=text_rotate.py">text_rotate.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=draw_module_example.py">draw_module_example.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=bouncing_rectangle.py">bouncing_rectangle.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=animating_snow.py">animating_snow.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=functions_and_graphics.py">functions_and_graphics.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=move_mouse.py">move_mouse.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=move_keyboard.py">move_keyboard.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=move_game_controller.py">move_game_controller.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=joystick_calls.py">joystick_calls.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=bitmapped_graphics.py">bitmapped_graphics.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=array_backed_grid.py">array_backed_grid.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=instruction_screen.py">instruction_screen.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=background_music.py">background_music.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=game_over.py">game_over.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=radar_sweep.py">radar_sweep.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=timer.py">timer.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=recursive_rectangles.py">recursive_rectangles.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=fractal.py">fractal.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=timer.py">timer.py</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
              <a href="http://programarcadegames.com/index.php?chapter=example_code" class="dropdown-toggle" data-toggle="dropdown">Sprite Examples</a>
              <ul class="dropdown-menu">

<li><a href="http://programarcadegames.com/python_examples/f.php?file=sprite_collect_blocks.py">sprite_collect_blocks.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=moving_sprites.py">moving_sprites.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=pick_up_blocks.py">pick_up_blocks.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=moving_sprites_bounce.py">moving_sprites_bounce.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=sprite_circle_movement.py">sprite_circle_movement.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=sprite_collect_blocks_levels.py">sprite_collect_blocks_levels.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=sprite_collect_circle.py">sprite_collect_circle.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=sprite_collect_graphic.py">sprite_collect_graphic.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=sprite_rotating.py">sprite_rotating.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=game_class_example.py">game_class_example.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=move_sprite_mouse.py">move_sprite_mouse.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=move_sprite_keyboard_jump.py">move_sprite_keyboard_jump.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=move_sprite_keyboard_smooth.py">move_sprite_keyboard_smooth.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=move_sprite_game_controller.py">move_sprite_game_controller.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=pong.py">pong.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=bullets.py">bullets.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=bullets_aimed.py">bullets_aimed.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=snake.py">snake.py</a></li>

</ul></li>

            <li class="dropdown-submenu">
              <a href="http://programarcadegames.com/index.php?chapter=example_code" class="dropdown-toggle" data-toggle="dropdown">Platformer Examples</a>
              <ul class="dropdown-menu">

<li><a href="http://programarcadegames.com/python_examples/f.php?file=move_with_walls_example.py">move_with_walls_example.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=maze_runner.py">maze_runner.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=platform_jumper.py">platform_jumper.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=platform_scroller.py">platform_scroller.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/f.php?file=platform_moving.py">platform_moving.py</a></li>
<li><a href="http://programarcadegames.com/python_examples/en/sprite_sheets/">Full example</a></li>
</ul>
            </li>

          </ul>
        </li>
      </ul>

      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a href="http://programarcadegames.com/index.php?chapter=example_code" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Practice <span class="caret"></span></a>
          <ul class="dropdown-menu">

<li><a href="http://programarcadegames.com/quiz/progress.php">Quizzes</a></li>
<li><a href="http://programarcadegames.com/index.php?chapter=sample_worksheets">Worksheets</a></li>
<li><a href="http://programarcadegames.com/index.php?chapter=labs">Labs</a></li>
<li><a href="http://programarcadegames.com/index.php?chapter=sample_tests">Tests</a></li>
<li><a href="http://programarcadegames.com/user_progress_report.php">Track Progress</a></li>

          </ul>
        </li>
      </ul>


      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a href="http://programarcadegames.com/index.php?chapter=example_code" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">More Info <span class="caret"></span></a>
          <ul class="dropdown-menu">

  <li><a href="http://programarcadegames.com/chapters/scholarships.php">U.S. Programming Scholarships</a></li>
  <li><a href="http://programarcadegames.com/chapters/about.php">About the author</a></li>
  <li><a href="http://programarcadegames.com/chapters/book.php">Buy the book</a></li>
  <li><a href="http://simpson.edu/computer-science/">Learn Computer Science @ Simpson</a></li>
  <li><a href="https://twitter.com/professorcraven">My Twitter</a></li>
          </ul>
        </li>
      </ul>

      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a href="http://programarcadegames.com/python_examples/en/sprite_sheets/#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Language <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="http://programarcadegames.com/index.php?lang=en">English</a></li>
            <li><a href="http://programarcadegames.com/index.php?lang=cn">Chinese</a></li>
            <li><a href="http://programarcadegames.com/index.php?lang=nl">Dutch - Nederlands</a></li>
            <li><a href="http://programarcadegames.com/index.php?lang=fi">Finnish - Suomi</a></li>
            <li><a href="http://programarcadegames.com/index.php?lang=fr">French - Français</a></li>
            <li><a href="http://programarcadegames.com/index.php?lang=hu">Hungarian - Magyar</a></li>
            <li><a href="http://programarcadegames.com/index.php?lang=ko">Korean - 한국어</a></li>
            <li><a href="http://programarcadegames.com/index.php?lang=pt-br">Portuguese - Português</a></li>
            <li><a href="http://programarcadegames.com/index.php?lang=ru">Russian - Русский</a></li>
            <li><a href="http://programarcadegames.com/index.php?lang=es">Spanish - Español</a></li>
            <li><a href="http://programarcadegames.com/index.php?lang=tr">Turkish - Türkçe</a></li>
          </ul>
        </li>
                  <!-- '172.31.37.76' -->
      </ul>

    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<p><a href="http://programarcadegames.com/index.php?chapter=example_code">&lt;-- Back to list of examples</a></p>

<h2>Platformer With Sprite Sheets</h2>


<p>Example code for this example can be downloaded here: <a href="http://programarcadegames.com/python_examples/en/sprite_sheets/spritesheet_example.zip">spritesheet_example.zip</a>

</p><p>A quick video of our final program is below, and at the bottom of the page is
	a video explanation of the program.

</p><p><iframe width="480" height="360" src="./source_files/xQb3w182s7I.html" frameborder="0" allowfullscreen=""></iframe>


</p><p>This example shows a platformer game using <em>sprite sheets</em>. A good 2D game can
	involve a lot of graphics. Rather than create and manage a file for each image, games will
	use a large image made up of several smaller images. For example, this sprite sheet
	has multiple frames of a player character walking all in one image:

</p><figure style="width: 15%; ">
<a id="fig.p1_walk" href="./source_files/p1_walk.png" class="fancybox" rel="group"><img style="width: 100%" src="./source_files/p1_walk.png" alt="fig.p1_walk"></a><figcaption><kbd>p1_walk.png</kbd> spritesheet</figcaption>
</figure>

<p>The sprite sheet was downloaded from the
	``<a href="http://opengameart.org/content/platformer-art-deluxe">Platformer Art Deluxe</a>''
	package at OpenGameArt.org and was created by author
	<a href="http://opengameart.org/users/kenney">Kenney</a>. Here is another sprite sheet that
	our game uses to build the world:

</p><figure style="width: 35%; ">
<a id="fig.tiles_spritesheet" href="./source_files/tiles_spritesheet.png" class="fancybox" rel="group"><img style="width: 100%" src="./source_files/tiles_spritesheet.png" alt="fig.tiles_spritesheet"></a><figcaption><kbd>tiles_spritesheet.png</kbd> spritesheet</figcaption>
</figure>
<p>In addition, I've created a couple backdrops for my game. You can't interact with the backdrops,
	but I think it is more interesting to have a backdrop than just have a solid color. The backdrop
	was created using the <a href="http://sourceforge.net/projects/tiled/">Tiled Map Editor</a> and Kenney's
	<a href="http://opengameart.org/content/platformer-art-buildings">Buildings</a> sprite sheet.

</p><figure style="width: 35%; ">
<a id="fig.background" href="./source_files/background_01.png" class="fancybox" rel="group"><img style="width: 100%" src="./source_files/background_01.png" alt="fig.background"></a><figcaption><kbd>background_01.png</kbd></figcaption>
</figure>

<p>This is the backdrop for Level 2.
</p><figure style="width: 35%; ">
<a id="fig.background" href="./source_files/background_02.png" class="fancybox" rel="group"><img style="width: 100%" src="./source_files/background_02.png" alt="fig.background"></a><figcaption><kbd>background_02.png</kbd></figcaption>
</figure>

<p>Finally, the code! This code builds off the other platformer examples
	on this website. I've divided the code up into several files to make
	it easier to navigate.


</p><p>The first file just has some variables that represent constant values. It makes
	the code easier to read by using variables like <kbd>WHITE</kbd> and allows
	me to change the screen size easily.

</p><div><div id="highlighter_443964" class="syntaxhighlighter  python"><table border="0" cellpadding="0" cellspacing="0"><caption>constants.py</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python comments">"""</code></div><div class="line number2 index1 alt1"><code class="python comments">Global constants</code></div><div class="line number3 index2 alt2"><code class="python comments">"""</code></div><div class="line number4 index3 alt1"> </div><div class="line number5 index4 alt2"><code class="python comments"># Colors</code></div><div class="line number6 index5 alt1"><code class="python plain">BLACK    </code><code class="python keyword">=</code> <code class="python plain">(   </code><code class="python value">0</code><code class="python plain">,   </code><code class="python value">0</code><code class="python plain">,   </code><code class="python value">0</code><code class="python plain">) </code></div><div class="line number7 index6 alt2"><code class="python plain">WHITE    </code><code class="python keyword">=</code> <code class="python plain">( </code><code class="python value">255</code><code class="python plain">, </code><code class="python value">255</code><code class="python plain">, </code><code class="python value">255</code><code class="python plain">) </code></div><div class="line number8 index7 alt1"><code class="python plain">BLUE     </code><code class="python keyword">=</code> <code class="python plain">(   </code><code class="python value">0</code><code class="python plain">,   </code><code class="python value">0</code><code class="python plain">, </code><code class="python value">255</code><code class="python plain">)</code></div><div class="line number9 index8 alt2"> </div><div class="line number10 index9 alt1"><code class="python comments"># Screen dimensions</code></div><div class="line number11 index10 alt2"><code class="python plain">SCREEN_WIDTH  </code><code class="python keyword">=</code> <code class="python value">800</code></div><div class="line number12 index11 alt1"><code class="python plain">SCREEN_HEIGHT </code><code class="python keyword">=</code> <code class="python value">600</code></div></div></td></tr></tbody></table></div></div>
 <p>This class pulls smaller images out of the large sprite sheet. Create an
 	instance of the class and pass in the file name as a parameter to the constructor. Then
 	call <kbd>getImage</kbd> with the x, y location of the upper left corner of yorur sprite
 	along with its height and width. You can use a drawing program to get the location of the
 	sprite images you are intersted in.

</p><div><div id="highlighter_562427" class="syntaxhighlighter  python"><table border="0" cellpadding="0" cellspacing="0"><caption>spritesheet_functions.py</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python comments">"""</code></div><div class="line number2 index1 alt1"><code class="python comments">This module is used to pull individual sprites from sprite sheets.</code></div><div class="line number3 index2 alt2"><code class="python comments">"""</code></div><div class="line number4 index3 alt1"><code class="python keyword">import</code> <code class="python plain">pygame</code></div><div class="line number5 index4 alt2"> </div><div class="line number6 index5 alt1"><code class="python keyword">import</code> <code class="python plain">constants</code></div><div class="line number7 index6 alt2"> </div><div class="line number8 index7 alt1"><code class="python keyword">class</code> <code class="python plain">SpriteSheet(</code><code class="python functions">object</code><code class="python plain">):</code></div><div class="line number9 index8 alt2"><code class="python spaces">    </code><code class="python comments">""" Class used to grab images out of a sprite sheet. """</code></div><div class="line number10 index9 alt1"> </div><div class="line number11 index10 alt2"><code class="python spaces">    </code><code class="python keyword">def</code> <code class="python plain">__init__(</code><code class="python color1">self</code><code class="python plain">, file_name):</code></div><div class="line number12 index11 alt1"><code class="python spaces">        </code><code class="python comments">""" Constructor. Pass in the file name of the sprite sheet. """</code></div><div class="line number13 index12 alt2"> </div><div class="line number14 index13 alt1"><code class="python spaces">        </code><code class="python comments"># Load the sprite sheet.</code></div><div class="line number15 index14 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.sprite_sheet </code><code class="python keyword">=</code> <code class="python plain">pygame.image.load(file_name).convert()</code></div><div class="line number16 index15 alt1"> </div><div class="line number17 index16 alt2"> </div><div class="line number18 index17 alt1"><code class="python spaces">    </code><code class="python keyword">def</code> <code class="python plain">get_image(</code><code class="python color1">self</code><code class="python plain">, x, y, width, height):</code></div><div class="line number19 index18 alt2"><code class="python spaces">        </code><code class="python comments">""" Grab a single image out of a larger spritesheet</code></div><div class="line number20 index19 alt1"><code class="python spaces">            </code><code class="python comments">Pass in the x, y location of the sprite</code></div><div class="line number21 index20 alt2"><code class="python spaces">            </code><code class="python comments">and the width and height of the sprite. """</code></div><div class="line number22 index21 alt1"> </div><div class="line number23 index22 alt2"><code class="python spaces">        </code><code class="python comments"># Create a new blank image</code></div><div class="line number24 index23 alt1"><code class="python spaces">        </code><code class="python plain">image </code><code class="python keyword">=</code> <code class="python plain">pygame.Surface([width, height]).convert()</code></div><div class="line number25 index24 alt2"> </div><div class="line number26 index25 alt1"><code class="python spaces">        </code><code class="python comments"># Copy the sprite from the large sheet onto the smaller image</code></div><div class="line number27 index26 alt2"><code class="python spaces">        </code><code class="python plain">image.blit(</code><code class="python color1">self</code><code class="python plain">.sprite_sheet, (</code><code class="python value">0</code><code class="python plain">, </code><code class="python value">0</code><code class="python plain">), (x, y, width, height))</code></div><div class="line number28 index27 alt1"> </div><div class="line number29 index28 alt2"><code class="python spaces">        </code><code class="python comments"># Assuming black works as the transparent color</code></div><div class="line number30 index29 alt1"><code class="python spaces">        </code><code class="python plain">image.set_colorkey(constants.BLACK)</code></div><div class="line number31 index30 alt2"> </div><div class="line number32 index31 alt1"><code class="python spaces">        </code><code class="python comments"># Return the image</code></div><div class="line number33 index32 alt2"><code class="python spaces">        </code><code class="python keyword">return</code> <code class="python plain">image</code></div></div></td></tr></tbody></table></div></div>
<p>This next file defines platforms we can jump on or run into.
	At the beginning of the file
	we create lists for each image we want to use. The lists contain the x, y
	location of the sprite, along with the width and height.
    Next is the <kbd>Platform</kbd> class that defines a non-moving platform.
    There isn't much to it. The class passes along the image x, y, width, and height
    and uses the SpriteSheet class to grab the image.

</p><p>If you want moving sprites, the next class <kbd>MovingPlatform</kbd> adds
	functionality to its parent class <kbd>Platform</kbd>. The class keeps track
	of its boundaries that it stays in, along with the velocity. The update is
	complex because a moving platform can 'bump' the user and move him/her. It also
	needs to keep track of how far the world has scrolled to the left or right.

</p><div><div id="highlighter_552782" class="syntaxhighlighter  python"><table border="0" cellpadding="0" cellspacing="0"><caption>platforms.py</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div><div class="line number76 index75 alt1">76</div><div class="line number77 index76 alt2">77</div><div class="line number78 index77 alt1">78</div><div class="line number79 index78 alt2">79</div><div class="line number80 index79 alt1">80</div><div class="line number81 index80 alt2">81</div><div class="line number82 index81 alt1">82</div><div class="line number83 index82 alt2">83</div><div class="line number84 index83 alt1">84</div><div class="line number85 index84 alt2">85</div><div class="line number86 index85 alt1">86</div><div class="line number87 index86 alt2">87</div><div class="line number88 index87 alt1">88</div><div class="line number89 index88 alt2">89</div><div class="line number90 index89 alt1">90</div><div class="line number91 index90 alt2">91</div><div class="line number92 index91 alt1">92</div><div class="line number93 index92 alt2">93</div><div class="line number94 index93 alt1">94</div><div class="line number95 index94 alt2">95</div><div class="line number96 index95 alt1">96</div><div class="line number97 index96 alt2">97</div><div class="line number98 index97 alt1">98</div><div class="line number99 index98 alt2">99</div><div class="line number100 index99 alt1">100</div><div class="line number101 index100 alt2">101</div><div class="line number102 index101 alt1">102</div><div class="line number103 index102 alt2">103</div><div class="line number104 index103 alt1">104</div><div class="line number105 index104 alt2">105</div><div class="line number106 index105 alt1">106</div><div class="line number107 index106 alt2">107</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python comments">"""</code></div><div class="line number2 index1 alt1"><code class="python comments">Module for managing platforms.</code></div><div class="line number3 index2 alt2"><code class="python comments">"""</code></div><div class="line number4 index3 alt1"><code class="python keyword">import</code> <code class="python plain">pygame</code></div><div class="line number5 index4 alt2"> </div><div class="line number6 index5 alt1"><code class="python keyword">from</code> <code class="python plain">spritesheet_functions </code><code class="python keyword">import</code> <code class="python plain">SpriteSheet</code></div><div class="line number7 index6 alt2"> </div><div class="line number8 index7 alt1"><code class="python comments"># These constants define our platform types:</code></div><div class="line number9 index8 alt2"><code class="python comments">#   Name of file</code></div><div class="line number10 index9 alt1"><code class="python comments">#   X location of sprite</code></div><div class="line number11 index10 alt2"><code class="python comments">#   Y location of sprite</code></div><div class="line number12 index11 alt1"><code class="python comments">#   Width of sprite</code></div><div class="line number13 index12 alt2"><code class="python comments">#   Height of sprite</code></div><div class="line number14 index13 alt1"> </div><div class="line number15 index14 alt2"><code class="python plain">GRASS_LEFT            </code><code class="python keyword">=</code> <code class="python plain">(</code><code class="python value">576</code><code class="python plain">, </code><code class="python value">720</code><code class="python plain">, </code><code class="python value">70</code><code class="python plain">, </code><code class="python value">70</code><code class="python plain">)</code></div><div class="line number16 index15 alt1"><code class="python plain">GRASS_RIGHT           </code><code class="python keyword">=</code> <code class="python plain">(</code><code class="python value">576</code><code class="python plain">, </code><code class="python value">576</code><code class="python plain">, </code><code class="python value">70</code><code class="python plain">, </code><code class="python value">70</code><code class="python plain">)</code></div><div class="line number17 index16 alt2"><code class="python plain">GRASS_MIDDLE          </code><code class="python keyword">=</code> <code class="python plain">(</code><code class="python value">504</code><code class="python plain">, </code><code class="python value">576</code><code class="python plain">, </code><code class="python value">70</code><code class="python plain">, </code><code class="python value">70</code><code class="python plain">)</code></div><div class="line number18 index17 alt1"><code class="python plain">STONE_PLATFORM_LEFT   </code><code class="python keyword">=</code> <code class="python plain">(</code><code class="python value">432</code><code class="python plain">, </code><code class="python value">720</code><code class="python plain">, </code><code class="python value">70</code><code class="python plain">, </code><code class="python value">40</code><code class="python plain">)</code></div><div class="line number19 index18 alt2"><code class="python plain">STONE_PLATFORM_MIDDLE </code><code class="python keyword">=</code> <code class="python plain">(</code><code class="python value">648</code><code class="python plain">, </code><code class="python value">648</code><code class="python plain">, </code><code class="python value">70</code><code class="python plain">, </code><code class="python value">40</code><code class="python plain">)</code></div><div class="line number20 index19 alt1"><code class="python plain">STONE_PLATFORM_RIGHT  </code><code class="python keyword">=</code> <code class="python plain">(</code><code class="python value">792</code><code class="python plain">, </code><code class="python value">648</code><code class="python plain">, </code><code class="python value">70</code><code class="python plain">, </code><code class="python value">40</code><code class="python plain">)</code></div><div class="line number21 index20 alt2"> </div><div class="line number22 index21 alt1"><code class="python keyword">class</code> <code class="python plain">Platform(pygame.sprite.Sprite):</code></div><div class="line number23 index22 alt2"><code class="python spaces">    </code><code class="python comments">""" Platform the user can jump on """</code></div><div class="line number24 index23 alt1"> </div><div class="line number25 index24 alt2"><code class="python spaces">    </code><code class="python keyword">def</code> <code class="python plain">__init__(</code><code class="python color1">self</code><code class="python plain">, sprite_sheet_data):</code></div><div class="line number26 index25 alt1"><code class="python spaces">        </code><code class="python comments">""" Platform constructor. Assumes constructed with user passing in</code></div><div class="line number27 index26 alt2"><code class="python spaces">            </code><code class="python comments">an array of 5 numbers like what's defined at the top of this</code></div><div class="line number28 index27 alt1"><code class="python spaces">            </code><code class="python comments">code. """</code></div><div class="line number29 index28 alt2"><code class="python spaces">        </code><code class="python functions">super</code><code class="python plain">().__init__()</code></div><div class="line number30 index29 alt1"> </div><div class="line number31 index30 alt2"><code class="python spaces">        </code><code class="python plain">sprite_sheet </code><code class="python keyword">=</code> <code class="python plain">SpriteSheet(</code><code class="python string">"tiles_spritesheet.png"</code><code class="python plain">)</code></div><div class="line number32 index31 alt1"><code class="python spaces">        </code><code class="python comments"># Grab the image for this platform</code></div><div class="line number33 index32 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.image </code><code class="python keyword">=</code> <code class="python plain">sprite_sheet.get_image(sprite_sheet_data[</code><code class="python value">0</code><code class="python plain">],</code></div><div class="line number34 index33 alt1"><code class="python spaces">                                            </code><code class="python plain">sprite_sheet_data[</code><code class="python value">1</code><code class="python plain">],</code></div><div class="line number35 index34 alt2"><code class="python spaces">                                            </code><code class="python plain">sprite_sheet_data[</code><code class="python value">2</code><code class="python plain">],</code></div><div class="line number36 index35 alt1"><code class="python spaces">                                            </code><code class="python plain">sprite_sheet_data[</code><code class="python value">3</code><code class="python plain">])</code></div><div class="line number37 index36 alt2"> </div><div class="line number38 index37 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.rect </code><code class="python keyword">=</code> <code class="python color1">self</code><code class="python plain">.image.get_rect()</code></div><div class="line number39 index38 alt2"> </div><div class="line number40 index39 alt1"> </div><div class="line number41 index40 alt2"><code class="python keyword">class</code> <code class="python plain">MovingPlatform(Platform):</code></div><div class="line number42 index41 alt1"><code class="python spaces">    </code><code class="python comments">""" This is a fancier platform that can actually move. """</code></div><div class="line number43 index42 alt2"> </div><div class="line number44 index43 alt1"><code class="python spaces">    </code><code class="python keyword">def</code> <code class="python plain">__init__(</code><code class="python color1">self</code><code class="python plain">, sprite_sheet_data):</code></div><div class="line number45 index44 alt2"> </div><div class="line number46 index45 alt1"><code class="python spaces">        </code><code class="python functions">super</code><code class="python plain">().__init__(sprite_sheet_data)</code></div><div class="line number47 index46 alt2"> </div><div class="line number48 index47 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.change_x </code><code class="python keyword">=</code> <code class="python value">0</code></div><div class="line number49 index48 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.change_y </code><code class="python keyword">=</code> <code class="python value">0</code></div><div class="line number50 index49 alt1"> </div><div class="line number51 index50 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.boundary_top </code><code class="python keyword">=</code> <code class="python value">0</code></div><div class="line number52 index51 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.boundary_bottom </code><code class="python keyword">=</code> <code class="python value">0</code></div><div class="line number53 index52 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.boundary_left </code><code class="python keyword">=</code> <code class="python value">0</code></div><div class="line number54 index53 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.boundary_right </code><code class="python keyword">=</code> <code class="python value">0</code></div><div class="line number55 index54 alt2"> </div><div class="line number56 index55 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.level </code><code class="python keyword">=</code> <code class="python color1">None</code></div><div class="line number57 index56 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.player </code><code class="python keyword">=</code> <code class="python color1">None</code></div><div class="line number58 index57 alt1"> </div><div class="line number59 index58 alt2"><code class="python spaces">    </code><code class="python keyword">def</code> <code class="python plain">update(</code><code class="python color1">self</code><code class="python plain">):</code></div><div class="line number60 index59 alt1"><code class="python spaces">        </code><code class="python comments">""" Move the platform.</code></div><div class="line number61 index60 alt2"><code class="python spaces">            </code><code class="python comments">If the player is in the way, it will shove the player</code></div><div class="line number62 index61 alt1"><code class="python spaces">            </code><code class="python comments">out of the way. This does NOT handle what happens if a</code></div><div class="line number63 index62 alt2"><code class="python spaces">            </code><code class="python comments">platform shoves a player into another object. Make sure</code></div><div class="line number64 index63 alt1"><code class="python spaces">            </code><code class="python comments">moving platforms have clearance to push the player around</code></div><div class="line number65 index64 alt2"><code class="python spaces">            </code><code class="python comments">or add code to handle what happens if they don't. """</code></div><div class="line number66 index65 alt1"> </div><div class="line number67 index66 alt2"> </div><div class="line number68 index67 alt1"><code class="python spaces">        </code><code class="python comments"># Move left/right</code></div><div class="line number69 index68 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.rect.x </code><code class="python keyword">+</code><code class="python keyword">=</code> <code class="python color1">self</code><code class="python plain">.change_x</code></div><div class="line number70 index69 alt1"> </div><div class="line number71 index70 alt2"><code class="python spaces">        </code><code class="python comments"># See if we hit the player</code></div><div class="line number72 index71 alt1"><code class="python spaces">        </code><code class="python plain">hit </code><code class="python keyword">=</code> <code class="python plain">pygame.sprite.collide_rect(</code><code class="python color1">self</code><code class="python plain">, </code><code class="python color1">self</code><code class="python plain">.player)</code></div><div class="line number73 index72 alt2"><code class="python spaces">        </code><code class="python keyword">if</code> <code class="python plain">hit:</code></div><div class="line number74 index73 alt1"><code class="python spaces">            </code><code class="python comments"># We did hit the player. Shove the player around and</code></div><div class="line number75 index74 alt2"><code class="python spaces">            </code><code class="python comments"># assume he/she won't hit anything else.</code></div><div class="line number76 index75 alt1"> </div><div class="line number77 index76 alt2"><code class="python spaces">            </code><code class="python comments"># If we are moving right, set our right side</code></div><div class="line number78 index77 alt1"><code class="python spaces">            </code><code class="python comments"># to the left side of the item we hit</code></div><div class="line number79 index78 alt2"><code class="python spaces">            </code><code class="python keyword">if</code> <code class="python color1">self</code><code class="python plain">.change_x &lt; </code><code class="python value">0</code><code class="python plain">:</code></div><div class="line number80 index79 alt1"><code class="python spaces">                </code><code class="python color1">self</code><code class="python plain">.player.rect.right </code><code class="python keyword">=</code> <code class="python color1">self</code><code class="python plain">.rect.left</code></div><div class="line number81 index80 alt2"><code class="python spaces">            </code><code class="python keyword">else</code><code class="python plain">:</code></div><div class="line number82 index81 alt1"><code class="python spaces">                </code><code class="python comments"># Otherwise if we are moving left, do the opposite.</code></div><div class="line number83 index82 alt2"><code class="python spaces">                </code><code class="python color1">self</code><code class="python plain">.player.rect.left </code><code class="python keyword">=</code> <code class="python color1">self</code><code class="python plain">.rect.right</code></div><div class="line number84 index83 alt1"> </div><div class="line number85 index84 alt2"><code class="python spaces">        </code><code class="python comments"># Move up/down</code></div><div class="line number86 index85 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.rect.y </code><code class="python keyword">+</code><code class="python keyword">=</code> <code class="python color1">self</code><code class="python plain">.change_y</code></div><div class="line number87 index86 alt2"> </div><div class="line number88 index87 alt1"><code class="python spaces">        </code><code class="python comments"># Check and see if we the player</code></div><div class="line number89 index88 alt2"><code class="python spaces">        </code><code class="python plain">hit </code><code class="python keyword">=</code> <code class="python plain">pygame.sprite.collide_rect(</code><code class="python color1">self</code><code class="python plain">, </code><code class="python color1">self</code><code class="python plain">.player)</code></div><div class="line number90 index89 alt1"><code class="python spaces">        </code><code class="python keyword">if</code> <code class="python plain">hit:</code></div><div class="line number91 index90 alt2"><code class="python spaces">            </code><code class="python comments"># We did hit the player. Shove the player around and</code></div><div class="line number92 index91 alt1"><code class="python spaces">            </code><code class="python comments"># assume he/she won't hit anything else.</code></div><div class="line number93 index92 alt2"> </div><div class="line number94 index93 alt1"><code class="python spaces">            </code><code class="python comments"># Reset our position based on the top/bottom of the object.</code></div><div class="line number95 index94 alt2"><code class="python spaces">            </code><code class="python keyword">if</code> <code class="python color1">self</code><code class="python plain">.change_y &lt; </code><code class="python value">0</code><code class="python plain">:</code></div><div class="line number96 index95 alt1"><code class="python spaces">                </code><code class="python color1">self</code><code class="python plain">.player.rect.bottom </code><code class="python keyword">=</code> <code class="python color1">self</code><code class="python plain">.rect.top</code></div><div class="line number97 index96 alt2"><code class="python spaces">            </code><code class="python keyword">else</code><code class="python plain">:</code></div><div class="line number98 index97 alt1"><code class="python spaces">                </code><code class="python color1">self</code><code class="python plain">.player.rect.top </code><code class="python keyword">=</code> <code class="python color1">self</code><code class="python plain">.rect.bottom</code></div><div class="line number99 index98 alt2"> </div><div class="line number100 index99 alt1"><code class="python spaces">        </code><code class="python comments"># Check the boundaries and see if we need to reverse</code></div><div class="line number101 index100 alt2"><code class="python spaces">        </code><code class="python comments"># direction.</code></div><div class="line number102 index101 alt1"><code class="python spaces">        </code><code class="python keyword">if</code> <code class="python color1">self</code><code class="python plain">.rect.bottom &gt; </code><code class="python color1">self</code><code class="python plain">.boundary_bottom </code><code class="python keyword">or</code> <code class="python color1">self</code><code class="python plain">.rect.top &lt; </code><code class="python color1">self</code><code class="python plain">.boundary_top:</code></div><div class="line number103 index102 alt2"><code class="python spaces">            </code><code class="python color1">self</code><code class="python plain">.change_y </code><code class="python keyword">*</code><code class="python keyword">=</code> <code class="python keyword">-</code><code class="python value">1</code></div><div class="line number104 index103 alt1"> </div><div class="line number105 index104 alt2"><code class="python spaces">        </code><code class="python plain">cur_pos </code><code class="python keyword">=</code> <code class="python color1">self</code><code class="python plain">.rect.x </code><code class="python keyword">-</code> <code class="python color1">self</code><code class="python plain">.level.world_shift</code></div><div class="line number106 index105 alt1"><code class="python spaces">        </code><code class="python keyword">if</code> <code class="python plain">cur_pos &lt; </code><code class="python color1">self</code><code class="python plain">.boundary_left </code><code class="python keyword">or</code> <code class="python plain">cur_pos &gt; </code><code class="python color1">self</code><code class="python plain">.boundary_right:</code></div><div class="line number107 index106 alt2"><code class="python spaces">            </code><code class="python color1">self</code><code class="python plain">.change_x </code><code class="python keyword">*</code><code class="python keyword">=</code> <code class="python keyword">-</code><code class="python value">1</code></div></div></td></tr></tbody></table></div></div>
<p>This file defines each level in the game. There is a parent <kbd>Level</kbd> class
	that all levels should inherit from. Things that all levels have (like a list of platforms)
	are defined in this parent <kbd>Level<kbd> class. After that there is a class for each level.

</kbd></kbd></p><div><div id="highlighter_677693" class="syntaxhighlighter  python"><table border="0" cellpadding="0" cellspacing="0"><caption>levels.py</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div><div class="line number76 index75 alt1">76</div><div class="line number77 index76 alt2">77</div><div class="line number78 index77 alt1">78</div><div class="line number79 index78 alt2">79</div><div class="line number80 index79 alt1">80</div><div class="line number81 index80 alt2">81</div><div class="line number82 index81 alt1">82</div><div class="line number83 index82 alt2">83</div><div class="line number84 index83 alt1">84</div><div class="line number85 index84 alt2">85</div><div class="line number86 index85 alt1">86</div><div class="line number87 index86 alt2">87</div><div class="line number88 index87 alt1">88</div><div class="line number89 index88 alt2">89</div><div class="line number90 index89 alt1">90</div><div class="line number91 index90 alt2">91</div><div class="line number92 index91 alt1">92</div><div class="line number93 index92 alt2">93</div><div class="line number94 index93 alt1">94</div><div class="line number95 index94 alt2">95</div><div class="line number96 index95 alt1">96</div><div class="line number97 index96 alt2">97</div><div class="line number98 index97 alt1">98</div><div class="line number99 index98 alt2">99</div><div class="line number100 index99 alt1">100</div><div class="line number101 index100 alt2">101</div><div class="line number102 index101 alt1">102</div><div class="line number103 index102 alt2">103</div><div class="line number104 index103 alt1">104</div><div class="line number105 index104 alt2">105</div><div class="line number106 index105 alt1">106</div><div class="line number107 index106 alt2">107</div><div class="line number108 index107 alt1">108</div><div class="line number109 index108 alt2">109</div><div class="line number110 index109 alt1">110</div><div class="line number111 index110 alt2">111</div><div class="line number112 index111 alt1">112</div><div class="line number113 index112 alt2">113</div><div class="line number114 index113 alt1">114</div><div class="line number115 index114 alt2">115</div><div class="line number116 index115 alt1">116</div><div class="line number117 index116 alt2">117</div><div class="line number118 index117 alt1">118</div><div class="line number119 index118 alt2">119</div><div class="line number120 index119 alt1">120</div><div class="line number121 index120 alt2">121</div><div class="line number122 index121 alt1">122</div><div class="line number123 index122 alt2">123</div><div class="line number124 index123 alt1">124</div><div class="line number125 index124 alt2">125</div><div class="line number126 index125 alt1">126</div><div class="line number127 index126 alt2">127</div><div class="line number128 index127 alt1">128</div><div class="line number129 index128 alt2">129</div><div class="line number130 index129 alt1">130</div><div class="line number131 index130 alt2">131</div><div class="line number132 index131 alt1">132</div><div class="line number133 index132 alt2">133</div><div class="line number134 index133 alt1">134</div><div class="line number135 index134 alt2">135</div><div class="line number136 index135 alt1">136</div><div class="line number137 index136 alt2">137</div><div class="line number138 index137 alt1">138</div><div class="line number139 index138 alt2">139</div><div class="line number140 index139 alt1">140</div><div class="line number141 index140 alt2">141</div><div class="line number142 index141 alt1">142</div><div class="line number143 index142 alt2">143</div><div class="line number144 index143 alt1">144</div><div class="line number145 index144 alt2">145</div><div class="line number146 index145 alt1">146</div><div class="line number147 index146 alt2">147</div><div class="line number148 index147 alt1">148</div><div class="line number149 index148 alt2">149</div><div class="line number150 index149 alt1">150</div><div class="line number151 index150 alt2">151</div><div class="line number152 index151 alt1">152</div><div class="line number153 index152 alt2">153</div><div class="line number154 index153 alt1">154</div><div class="line number155 index154 alt2">155</div><div class="line number156 index155 alt1">156</div><div class="line number157 index156 alt2">157</div><div class="line number158 index157 alt1">158</div><div class="line number159 index158 alt2">159</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">import</code> <code class="python plain">pygame</code></div><div class="line number2 index1 alt1"> </div><div class="line number3 index2 alt2"><code class="python keyword">import</code> <code class="python plain">constants</code></div><div class="line number4 index3 alt1"><code class="python keyword">import</code> <code class="python plain">platforms</code></div><div class="line number5 index4 alt2"> </div><div class="line number6 index5 alt1"><code class="python keyword">class</code> <code class="python plain">Level():</code></div><div class="line number7 index6 alt2"><code class="python spaces">    </code><code class="python comments">""" This is a generic super-class used to define a level.</code></div><div class="line number8 index7 alt1"><code class="python spaces">        </code><code class="python comments">Create a child class for each level with level-specific</code></div><div class="line number9 index8 alt2"><code class="python spaces">        </code><code class="python comments">info. """</code></div><div class="line number10 index9 alt1"> </div><div class="line number11 index10 alt2"><code class="python spaces">    </code><code class="python keyword">def</code> <code class="python plain">__init__(</code><code class="python color1">self</code><code class="python plain">, player):</code></div><div class="line number12 index11 alt1"><code class="python spaces">        </code><code class="python comments">""" Constructor. Pass in a handle to player. Needed for when moving platforms</code></div><div class="line number13 index12 alt2"><code class="python spaces">            </code><code class="python comments">collide with the player. """</code></div><div class="line number14 index13 alt1"> </div><div class="line number15 index14 alt2"><code class="python spaces">        </code><code class="python comments"># Lists of sprites used in all levels. Add or remove</code></div><div class="line number16 index15 alt1"><code class="python spaces">        </code><code class="python comments"># lists as needed for your game.</code></div><div class="line number17 index16 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.platform_list </code><code class="python keyword">=</code> <code class="python color1">None</code></div><div class="line number18 index17 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.enemy_list </code><code class="python keyword">=</code> <code class="python color1">None</code></div><div class="line number19 index18 alt2"> </div><div class="line number20 index19 alt1"><code class="python spaces">        </code><code class="python comments"># Background image</code></div><div class="line number21 index20 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.background </code><code class="python keyword">=</code> <code class="python color1">None</code></div><div class="line number22 index21 alt1"> </div><div class="line number23 index22 alt2"><code class="python spaces">        </code><code class="python comments"># How far this world has been scrolled left/right</code></div><div class="line number24 index23 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.world_shift </code><code class="python keyword">=</code> <code class="python value">0</code></div><div class="line number25 index24 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.level_limit </code><code class="python keyword">=</code> <code class="python keyword">-</code><code class="python value">1000</code></div><div class="line number26 index25 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.platform_list </code><code class="python keyword">=</code> <code class="python plain">pygame.sprite.Group()</code></div><div class="line number27 index26 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.enemy_list </code><code class="python keyword">=</code> <code class="python plain">pygame.sprite.Group()</code></div><div class="line number28 index27 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.player </code><code class="python keyword">=</code> <code class="python plain">player</code></div><div class="line number29 index28 alt2"> </div><div class="line number30 index29 alt1"><code class="python spaces">    </code><code class="python comments"># Update everythign on this level</code></div><div class="line number31 index30 alt2"><code class="python spaces">    </code><code class="python keyword">def</code> <code class="python plain">update(</code><code class="python color1">self</code><code class="python plain">):</code></div><div class="line number32 index31 alt1"><code class="python spaces">        </code><code class="python comments">""" Update everything in this level."""</code></div><div class="line number33 index32 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.platform_list.update()</code></div><div class="line number34 index33 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.enemy_list.update()</code></div><div class="line number35 index34 alt2"> </div><div class="line number36 index35 alt1"><code class="python spaces">    </code><code class="python keyword">def</code> <code class="python plain">draw(</code><code class="python color1">self</code><code class="python plain">, screen):</code></div><div class="line number37 index36 alt2"><code class="python spaces">        </code><code class="python comments">""" Draw everything on this level. """</code></div><div class="line number38 index37 alt1"> </div><div class="line number39 index38 alt2"><code class="python spaces">        </code><code class="python comments"># Draw the background</code></div><div class="line number40 index39 alt1"><code class="python spaces">        </code><code class="python comments"># We don't shift the background as much as the sprites are shifted</code></div><div class="line number41 index40 alt2"><code class="python spaces">        </code><code class="python comments"># to give a feeling of depth.</code></div><div class="line number42 index41 alt1"><code class="python spaces">        </code><code class="python plain">screen.fill(constants.BLUE)</code></div><div class="line number43 index42 alt2"><code class="python spaces">        </code><code class="python plain">screen.blit(</code><code class="python color1">self</code><code class="python plain">.background,(</code><code class="python color1">self</code><code class="python plain">.world_shift </code><code class="python keyword">/</code><code class="python keyword">/</code> <code class="python value">3</code><code class="python plain">,</code><code class="python value">0</code><code class="python plain">))</code></div><div class="line number44 index43 alt1"> </div><div class="line number45 index44 alt2"><code class="python spaces">        </code><code class="python comments"># Draw all the sprite lists that we have</code></div><div class="line number46 index45 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.platform_list.draw(screen)</code></div><div class="line number47 index46 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.enemy_list.draw(screen)</code></div><div class="line number48 index47 alt1"> </div><div class="line number49 index48 alt2"><code class="python spaces">    </code><code class="python keyword">def</code> <code class="python plain">shift_world(</code><code class="python color1">self</code><code class="python plain">, shift_x):</code></div><div class="line number50 index49 alt1"><code class="python spaces">        </code><code class="python comments">""" When the user moves left/right and we need to scroll everything: """</code></div><div class="line number51 index50 alt2"> </div><div class="line number52 index51 alt1"><code class="python spaces">        </code><code class="python comments"># Keep track of the shift amount</code></div><div class="line number53 index52 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.world_shift </code><code class="python keyword">+</code><code class="python keyword">=</code> <code class="python plain">shift_x</code></div><div class="line number54 index53 alt1"> </div><div class="line number55 index54 alt2"><code class="python spaces">        </code><code class="python comments"># Go through all the sprite lists and shift</code></div><div class="line number56 index55 alt1"><code class="python spaces">        </code><code class="python keyword">for</code> <code class="python plain">platform </code><code class="python keyword">in</code> <code class="python color1">self</code><code class="python plain">.platform_list:</code></div><div class="line number57 index56 alt2"><code class="python spaces">            </code><code class="python plain">platform.rect.x </code><code class="python keyword">+</code><code class="python keyword">=</code> <code class="python plain">shift_x</code></div><div class="line number58 index57 alt1"> </div><div class="line number59 index58 alt2"><code class="python spaces">        </code><code class="python keyword">for</code> <code class="python plain">enemy </code><code class="python keyword">in</code> <code class="python color1">self</code><code class="python plain">.enemy_list:</code></div><div class="line number60 index59 alt1"><code class="python spaces">            </code><code class="python plain">enemy.rect.x </code><code class="python keyword">+</code><code class="python keyword">=</code> <code class="python plain">shift_x</code></div><div class="line number61 index60 alt2"> </div><div class="line number62 index61 alt1"><code class="python comments"># Create platforms for the level</code></div><div class="line number63 index62 alt2"><code class="python keyword">class</code> <code class="python plain">Level_01(Level):</code></div><div class="line number64 index63 alt1"><code class="python spaces">    </code><code class="python comments">""" Definition for level 1. """</code></div><div class="line number65 index64 alt2"> </div><div class="line number66 index65 alt1"><code class="python spaces">    </code><code class="python keyword">def</code> <code class="python plain">__init__(</code><code class="python color1">self</code><code class="python plain">, player):</code></div><div class="line number67 index66 alt2"><code class="python spaces">        </code><code class="python comments">""" Create level 1. """</code></div><div class="line number68 index67 alt1"> </div><div class="line number69 index68 alt2"><code class="python spaces">        </code><code class="python comments"># Call the parent constructor</code></div><div class="line number70 index69 alt1"><code class="python spaces">        </code><code class="python plain">Level.__init__(</code><code class="python color1">self</code><code class="python plain">, player)</code></div><div class="line number71 index70 alt2"> </div><div class="line number72 index71 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.background </code><code class="python keyword">=</code> <code class="python plain">pygame.image.load(</code><code class="python string">"background_01.png"</code><code class="python plain">).convert()</code></div><div class="line number73 index72 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.background.set_colorkey(constants.WHITE)</code></div><div class="line number74 index73 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.level_limit </code><code class="python keyword">=</code> <code class="python keyword">-</code><code class="python value">2500</code></div><div class="line number75 index74 alt2"> </div><div class="line number76 index75 alt1"><code class="python spaces">        </code><code class="python comments"># Array with type of platform, and x, y location of the platform.</code></div><div class="line number77 index76 alt2"><code class="python spaces">        </code><code class="python plain">level </code><code class="python keyword">=</code> <code class="python plain">[ [platforms.GRASS_LEFT, </code><code class="python value">500</code><code class="python plain">, </code><code class="python value">500</code><code class="python plain">],</code></div><div class="line number78 index77 alt1"><code class="python spaces">                  </code><code class="python plain">[platforms.GRASS_MIDDLE, </code><code class="python value">570</code><code class="python plain">, </code><code class="python value">500</code><code class="python plain">],</code></div><div class="line number79 index78 alt2"><code class="python spaces">                  </code><code class="python plain">[platforms.GRASS_RIGHT, </code><code class="python value">640</code><code class="python plain">, </code><code class="python value">500</code><code class="python plain">],</code></div><div class="line number80 index79 alt1"><code class="python spaces">                  </code><code class="python plain">[platforms.GRASS_LEFT, </code><code class="python value">800</code><code class="python plain">, </code><code class="python value">400</code><code class="python plain">],</code></div><div class="line number81 index80 alt2"><code class="python spaces">                  </code><code class="python plain">[platforms.GRASS_MIDDLE, </code><code class="python value">870</code><code class="python plain">, </code><code class="python value">400</code><code class="python plain">],</code></div><div class="line number82 index81 alt1"><code class="python spaces">                  </code><code class="python plain">[platforms.GRASS_RIGHT, </code><code class="python value">940</code><code class="python plain">, </code><code class="python value">400</code><code class="python plain">],</code></div><div class="line number83 index82 alt2"><code class="python spaces">                  </code><code class="python plain">[platforms.GRASS_LEFT, </code><code class="python value">1000</code><code class="python plain">, </code><code class="python value">500</code><code class="python plain">],</code></div><div class="line number84 index83 alt1"><code class="python spaces">                  </code><code class="python plain">[platforms.GRASS_MIDDLE, </code><code class="python value">1070</code><code class="python plain">, </code><code class="python value">500</code><code class="python plain">],</code></div><div class="line number85 index84 alt2"><code class="python spaces">                  </code><code class="python plain">[platforms.GRASS_RIGHT, </code><code class="python value">1140</code><code class="python plain">, </code><code class="python value">500</code><code class="python plain">],</code></div><div class="line number86 index85 alt1"><code class="python spaces">                  </code><code class="python plain">[platforms.STONE_PLATFORM_LEFT, </code><code class="python value">1120</code><code class="python plain">, </code><code class="python value">280</code><code class="python plain">],</code></div><div class="line number87 index86 alt2"><code class="python spaces">                  </code><code class="python plain">[platforms.STONE_PLATFORM_MIDDLE, </code><code class="python value">1190</code><code class="python plain">, </code><code class="python value">280</code><code class="python plain">],</code></div><div class="line number88 index87 alt1"><code class="python spaces">                  </code><code class="python plain">[platforms.STONE_PLATFORM_RIGHT, </code><code class="python value">1260</code><code class="python plain">, </code><code class="python value">280</code><code class="python plain">],</code></div><div class="line number89 index88 alt2"><code class="python spaces">                  </code><code class="python plain">]</code></div><div class="line number90 index89 alt1"> </div><div class="line number91 index90 alt2"> </div><div class="line number92 index91 alt1"><code class="python spaces">        </code><code class="python comments"># Go through the array above and add platforms</code></div><div class="line number93 index92 alt2"><code class="python spaces">        </code><code class="python keyword">for</code> <code class="python plain">platform </code><code class="python keyword">in</code> <code class="python plain">level:</code></div><div class="line number94 index93 alt1"><code class="python spaces">            </code><code class="python plain">block </code><code class="python keyword">=</code> <code class="python plain">platforms.Platform(platform[</code><code class="python value">0</code><code class="python plain">])</code></div><div class="line number95 index94 alt2"><code class="python spaces">            </code><code class="python plain">block.rect.x </code><code class="python keyword">=</code> <code class="python plain">platform[</code><code class="python value">1</code><code class="python plain">]</code></div><div class="line number96 index95 alt1"><code class="python spaces">            </code><code class="python plain">block.rect.y </code><code class="python keyword">=</code> <code class="python plain">platform[</code><code class="python value">2</code><code class="python plain">]</code></div><div class="line number97 index96 alt2"><code class="python spaces">            </code><code class="python plain">block.player </code><code class="python keyword">=</code> <code class="python color1">self</code><code class="python plain">.player</code></div><div class="line number98 index97 alt1"><code class="python spaces">            </code><code class="python color1">self</code><code class="python plain">.platform_list.add(block)</code></div><div class="line number99 index98 alt2"> </div><div class="line number100 index99 alt1"><code class="python spaces">        </code><code class="python comments"># Add a custom moving platform</code></div><div class="line number101 index100 alt2"><code class="python spaces">        </code><code class="python plain">block </code><code class="python keyword">=</code> <code class="python plain">platforms.MovingPlatform(platforms.STONE_PLATFORM_MIDDLE)</code></div><div class="line number102 index101 alt1"><code class="python spaces">        </code><code class="python plain">block.rect.x </code><code class="python keyword">=</code> <code class="python value">1350</code></div><div class="line number103 index102 alt2"><code class="python spaces">        </code><code class="python plain">block.rect.y </code><code class="python keyword">=</code> <code class="python value">280</code></div><div class="line number104 index103 alt1"><code class="python spaces">        </code><code class="python plain">block.boundary_left </code><code class="python keyword">=</code> <code class="python value">1350</code></div><div class="line number105 index104 alt2"><code class="python spaces">        </code><code class="python plain">block.boundary_right </code><code class="python keyword">=</code> <code class="python value">1600</code></div><div class="line number106 index105 alt1"><code class="python spaces">        </code><code class="python plain">block.change_x </code><code class="python keyword">=</code> <code class="python value">1</code></div><div class="line number107 index106 alt2"><code class="python spaces">        </code><code class="python plain">block.player </code><code class="python keyword">=</code> <code class="python color1">self</code><code class="python plain">.player</code></div><div class="line number108 index107 alt1"><code class="python spaces">        </code><code class="python plain">block.level </code><code class="python keyword">=</code> <code class="python color1">self</code></div><div class="line number109 index108 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.platform_list.add(block)</code></div><div class="line number110 index109 alt1"> </div><div class="line number111 index110 alt2"> </div><div class="line number112 index111 alt1"><code class="python comments"># Create platforms for the level</code></div><div class="line number113 index112 alt2"><code class="python keyword">class</code> <code class="python plain">Level_02(Level):</code></div><div class="line number114 index113 alt1"><code class="python spaces">    </code><code class="python comments">""" Definition for level 2. """</code></div><div class="line number115 index114 alt2"> </div><div class="line number116 index115 alt1"><code class="python spaces">    </code><code class="python keyword">def</code> <code class="python plain">__init__(</code><code class="python color1">self</code><code class="python plain">, player):</code></div><div class="line number117 index116 alt2"><code class="python spaces">        </code><code class="python comments">""" Create level 1. """</code></div><div class="line number118 index117 alt1"> </div><div class="line number119 index118 alt2"><code class="python spaces">        </code><code class="python comments"># Call the parent constructor</code></div><div class="line number120 index119 alt1"><code class="python spaces">        </code><code class="python plain">Level.__init__(</code><code class="python color1">self</code><code class="python plain">, player)</code></div><div class="line number121 index120 alt2"> </div><div class="line number122 index121 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.background </code><code class="python keyword">=</code> <code class="python plain">pygame.image.load(</code><code class="python string">"background_02.png"</code><code class="python plain">).convert()</code></div><div class="line number123 index122 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.background.set_colorkey(constants.WHITE)</code></div><div class="line number124 index123 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.level_limit </code><code class="python keyword">=</code> <code class="python keyword">-</code><code class="python value">1000</code></div><div class="line number125 index124 alt2"> </div><div class="line number126 index125 alt1"><code class="python spaces">        </code><code class="python comments"># Array with type of platform, and x, y location of the platform.</code></div><div class="line number127 index126 alt2"><code class="python spaces">        </code><code class="python plain">level </code><code class="python keyword">=</code> <code class="python plain">[ [platforms.STONE_PLATFORM_LEFT, </code><code class="python value">500</code><code class="python plain">, </code><code class="python value">550</code><code class="python plain">],</code></div><div class="line number128 index127 alt1"><code class="python spaces">                  </code><code class="python plain">[platforms.STONE_PLATFORM_MIDDLE, </code><code class="python value">570</code><code class="python plain">, </code><code class="python value">550</code><code class="python plain">],</code></div><div class="line number129 index128 alt2"><code class="python spaces">                  </code><code class="python plain">[platforms.STONE_PLATFORM_RIGHT, </code><code class="python value">640</code><code class="python plain">, </code><code class="python value">550</code><code class="python plain">],</code></div><div class="line number130 index129 alt1"><code class="python spaces">                  </code><code class="python plain">[platforms.GRASS_LEFT, </code><code class="python value">800</code><code class="python plain">, </code><code class="python value">400</code><code class="python plain">],</code></div><div class="line number131 index130 alt2"><code class="python spaces">                  </code><code class="python plain">[platforms.GRASS_MIDDLE, </code><code class="python value">870</code><code class="python plain">, </code><code class="python value">400</code><code class="python plain">],</code></div><div class="line number132 index131 alt1"><code class="python spaces">                  </code><code class="python plain">[platforms.GRASS_RIGHT, </code><code class="python value">940</code><code class="python plain">, </code><code class="python value">400</code><code class="python plain">],</code></div><div class="line number133 index132 alt2"><code class="python spaces">                  </code><code class="python plain">[platforms.GRASS_LEFT, </code><code class="python value">1000</code><code class="python plain">, </code><code class="python value">500</code><code class="python plain">],</code></div><div class="line number134 index133 alt1"><code class="python spaces">                  </code><code class="python plain">[platforms.GRASS_MIDDLE, </code><code class="python value">1070</code><code class="python plain">, </code><code class="python value">500</code><code class="python plain">],</code></div><div class="line number135 index134 alt2"><code class="python spaces">                  </code><code class="python plain">[platforms.GRASS_RIGHT, </code><code class="python value">1140</code><code class="python plain">, </code><code class="python value">500</code><code class="python plain">],</code></div><div class="line number136 index135 alt1"><code class="python spaces">                  </code><code class="python plain">[platforms.STONE_PLATFORM_LEFT, </code><code class="python value">1120</code><code class="python plain">, </code><code class="python value">280</code><code class="python plain">],</code></div><div class="line number137 index136 alt2"><code class="python spaces">                  </code><code class="python plain">[platforms.STONE_PLATFORM_MIDDLE, </code><code class="python value">1190</code><code class="python plain">, </code><code class="python value">280</code><code class="python plain">],</code></div><div class="line number138 index137 alt1"><code class="python spaces">                  </code><code class="python plain">[platforms.STONE_PLATFORM_RIGHT, </code><code class="python value">1260</code><code class="python plain">, </code><code class="python value">280</code><code class="python plain">],</code></div><div class="line number139 index138 alt2"><code class="python spaces">                  </code><code class="python plain">]</code></div><div class="line number140 index139 alt1"> </div><div class="line number141 index140 alt2"> </div><div class="line number142 index141 alt1"><code class="python spaces">        </code><code class="python comments"># Go through the array above and add platforms</code></div><div class="line number143 index142 alt2"><code class="python spaces">        </code><code class="python keyword">for</code> <code class="python plain">platform </code><code class="python keyword">in</code> <code class="python plain">level:</code></div><div class="line number144 index143 alt1"><code class="python spaces">            </code><code class="python plain">block </code><code class="python keyword">=</code> <code class="python plain">platforms.Platform(platform[</code><code class="python value">0</code><code class="python plain">])</code></div><div class="line number145 index144 alt2"><code class="python spaces">            </code><code class="python plain">block.rect.x </code><code class="python keyword">=</code> <code class="python plain">platform[</code><code class="python value">1</code><code class="python plain">]</code></div><div class="line number146 index145 alt1"><code class="python spaces">            </code><code class="python plain">block.rect.y </code><code class="python keyword">=</code> <code class="python plain">platform[</code><code class="python value">2</code><code class="python plain">]</code></div><div class="line number147 index146 alt2"><code class="python spaces">            </code><code class="python plain">block.player </code><code class="python keyword">=</code> <code class="python color1">self</code><code class="python plain">.player</code></div><div class="line number148 index147 alt1"><code class="python spaces">            </code><code class="python color1">self</code><code class="python plain">.platform_list.add(block)</code></div><div class="line number149 index148 alt2"> </div><div class="line number150 index149 alt1"><code class="python spaces">        </code><code class="python comments"># Add a custom moving platform</code></div><div class="line number151 index150 alt2"><code class="python spaces">        </code><code class="python plain">block </code><code class="python keyword">=</code> <code class="python plain">platforms.MovingPlatform(platforms.STONE_PLATFORM_MIDDLE)</code></div><div class="line number152 index151 alt1"><code class="python spaces">        </code><code class="python plain">block.rect.x </code><code class="python keyword">=</code> <code class="python value">1500</code></div><div class="line number153 index152 alt2"><code class="python spaces">        </code><code class="python plain">block.rect.y </code><code class="python keyword">=</code> <code class="python value">300</code></div><div class="line number154 index153 alt1"><code class="python spaces">        </code><code class="python plain">block.boundary_top </code><code class="python keyword">=</code> <code class="python value">100</code></div><div class="line number155 index154 alt2"><code class="python spaces">        </code><code class="python plain">block.boundary_bottom </code><code class="python keyword">=</code> <code class="python value">550</code></div><div class="line number156 index155 alt1"><code class="python spaces">        </code><code class="python plain">block.change_y </code><code class="python keyword">=</code> <code class="python keyword">-</code><code class="python value">1</code></div><div class="line number157 index156 alt2"><code class="python spaces">        </code><code class="python plain">block.player </code><code class="python keyword">=</code> <code class="python color1">self</code><code class="python plain">.player</code></div><div class="line number158 index157 alt1"><code class="python spaces">        </code><code class="python plain">block.level </code><code class="python keyword">=</code> <code class="python color1">self</code></div><div class="line number159 index158 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.platform_list.add(block)</code></div></div></td></tr></tbody></table></div></div>
<p>The player class. This class could be simple, but we will make this player
	have an animation as he/she moves left and right.

</p><div><div id="highlighter_58733" class="syntaxhighlighter  python"><table border="0" cellpadding="0" cellspacing="0"><caption>player.py</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div><div class="line number76 index75 alt1">76</div><div class="line number77 index76 alt2">77</div><div class="line number78 index77 alt1">78</div><div class="line number79 index78 alt2">79</div><div class="line number80 index79 alt1">80</div><div class="line number81 index80 alt2">81</div><div class="line number82 index81 alt1">82</div><div class="line number83 index82 alt2">83</div><div class="line number84 index83 alt1">84</div><div class="line number85 index84 alt2">85</div><div class="line number86 index85 alt1">86</div><div class="line number87 index86 alt2">87</div><div class="line number88 index87 alt1">88</div><div class="line number89 index88 alt2">89</div><div class="line number90 index89 alt1">90</div><div class="line number91 index90 alt2">91</div><div class="line number92 index91 alt1">92</div><div class="line number93 index92 alt2">93</div><div class="line number94 index93 alt1">94</div><div class="line number95 index94 alt2">95</div><div class="line number96 index95 alt1">96</div><div class="line number97 index96 alt2">97</div><div class="line number98 index97 alt1">98</div><div class="line number99 index98 alt2">99</div><div class="line number100 index99 alt1">100</div><div class="line number101 index100 alt2">101</div><div class="line number102 index101 alt1">102</div><div class="line number103 index102 alt2">103</div><div class="line number104 index103 alt1">104</div><div class="line number105 index104 alt2">105</div><div class="line number106 index105 alt1">106</div><div class="line number107 index106 alt2">107</div><div class="line number108 index107 alt1">108</div><div class="line number109 index108 alt2">109</div><div class="line number110 index109 alt1">110</div><div class="line number111 index110 alt2">111</div><div class="line number112 index111 alt1">112</div><div class="line number113 index112 alt2">113</div><div class="line number114 index113 alt1">114</div><div class="line number115 index114 alt2">115</div><div class="line number116 index115 alt1">116</div><div class="line number117 index116 alt2">117</div><div class="line number118 index117 alt1">118</div><div class="line number119 index118 alt2">119</div><div class="line number120 index119 alt1">120</div><div class="line number121 index120 alt2">121</div><div class="line number122 index121 alt1">122</div><div class="line number123 index122 alt2">123</div><div class="line number124 index123 alt1">124</div><div class="line number125 index124 alt2">125</div><div class="line number126 index125 alt1">126</div><div class="line number127 index126 alt2">127</div><div class="line number128 index127 alt1">128</div><div class="line number129 index128 alt2">129</div><div class="line number130 index129 alt1">130</div><div class="line number131 index130 alt2">131</div><div class="line number132 index131 alt1">132</div><div class="line number133 index132 alt2">133</div><div class="line number134 index133 alt1">134</div><div class="line number135 index134 alt2">135</div><div class="line number136 index135 alt1">136</div><div class="line number137 index136 alt2">137</div><div class="line number138 index137 alt1">138</div><div class="line number139 index138 alt2">139</div><div class="line number140 index139 alt1">140</div><div class="line number141 index140 alt2">141</div><div class="line number142 index141 alt1">142</div><div class="line number143 index142 alt2">143</div><div class="line number144 index143 alt1">144</div><div class="line number145 index144 alt2">145</div><div class="line number146 index145 alt1">146</div><div class="line number147 index146 alt2">147</div><div class="line number148 index147 alt1">148</div><div class="line number149 index148 alt2">149</div><div class="line number150 index149 alt1">150</div><div class="line number151 index150 alt2">151</div><div class="line number152 index151 alt1">152</div><div class="line number153 index152 alt2">153</div><div class="line number154 index153 alt1">154</div><div class="line number155 index154 alt2">155</div><div class="line number156 index155 alt1">156</div><div class="line number157 index156 alt2">157</div><div class="line number158 index157 alt1">158</div><div class="line number159 index158 alt2">159</div><div class="line number160 index159 alt1">160</div><div class="line number161 index160 alt2">161</div><div class="line number162 index161 alt1">162</div><div class="line number163 index162 alt2">163</div><div class="line number164 index163 alt1">164</div><div class="line number165 index164 alt2">165</div><div class="line number166 index165 alt1">166</div><div class="line number167 index166 alt2">167</div><div class="line number168 index167 alt1">168</div><div class="line number169 index168 alt2">169</div><div class="line number170 index169 alt1">170</div><div class="line number171 index170 alt2">171</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python comments">"""</code></div><div class="line number2 index1 alt1"><code class="python comments">This module is used to hold the Player class. The Player represents the user-</code></div><div class="line number3 index2 alt2"><code class="python comments">controlled sprite on the screen.</code></div><div class="line number4 index3 alt1"><code class="python comments">"""</code></div><div class="line number5 index4 alt2"><code class="python keyword">import</code> <code class="python plain">pygame</code></div><div class="line number6 index5 alt1"> </div><div class="line number7 index6 alt2"><code class="python keyword">import</code> <code class="python plain">constants</code></div><div class="line number8 index7 alt1"> </div><div class="line number9 index8 alt2"><code class="python keyword">from</code> <code class="python plain">platforms </code><code class="python keyword">import</code> <code class="python plain">MovingPlatform</code></div><div class="line number10 index9 alt1"><code class="python keyword">from</code> <code class="python plain">spritesheet_functions </code><code class="python keyword">import</code> <code class="python plain">SpriteSheet</code></div><div class="line number11 index10 alt2"> </div><div class="line number12 index11 alt1"><code class="python keyword">class</code> <code class="python plain">Player(pygame.sprite.Sprite):</code></div><div class="line number13 index12 alt2"><code class="python spaces">    </code><code class="python comments">""" This class represents the bar at the bottom that the player</code></div><div class="line number14 index13 alt1"><code class="python spaces">    </code><code class="python comments">controls. """</code></div><div class="line number15 index14 alt2"> </div><div class="line number16 index15 alt1"> </div><div class="line number17 index16 alt2"><code class="python spaces">    </code><code class="python comments"># -- Methods</code></div><div class="line number18 index17 alt1"><code class="python spaces">    </code><code class="python keyword">def</code> <code class="python plain">__init__(</code><code class="python color1">self</code><code class="python plain">):</code></div><div class="line number19 index18 alt2"><code class="python spaces">        </code><code class="python comments">""" Constructor function """</code></div><div class="line number20 index19 alt1"> </div><div class="line number21 index20 alt2"><code class="python spaces">        </code><code class="python comments"># Call the parent's constructor</code></div><div class="line number22 index21 alt1"><code class="python spaces">        </code><code class="python functions">super</code><code class="python plain">().__init__()</code></div><div class="line number23 index22 alt2"> </div><div class="line number24 index23 alt1"><code class="python spaces">        </code><code class="python comments"># -- Attributes</code></div><div class="line number25 index24 alt2"><code class="python spaces">        </code><code class="python comments"># Set speed vector of player</code></div><div class="line number26 index25 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.change_x </code><code class="python keyword">=</code> <code class="python value">0</code></div><div class="line number27 index26 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.change_y </code><code class="python keyword">=</code> <code class="python value">0</code></div><div class="line number28 index27 alt1"> </div><div class="line number29 index28 alt2"><code class="python spaces">        </code><code class="python comments"># This holds all the images for the animated walk left/right</code></div><div class="line number30 index29 alt1"><code class="python spaces">        </code><code class="python comments"># of our player</code></div><div class="line number31 index30 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.walking_frames_l </code><code class="python keyword">=</code> <code class="python plain">[]</code></div><div class="line number32 index31 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.walking_frames_r </code><code class="python keyword">=</code> <code class="python plain">[]</code></div><div class="line number33 index32 alt2"> </div><div class="line number34 index33 alt1"><code class="python spaces">        </code><code class="python comments"># What direction is the player facing?</code></div><div class="line number35 index34 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.direction </code><code class="python keyword">=</code> <code class="python string">"R"</code></div><div class="line number36 index35 alt1"> </div><div class="line number37 index36 alt2"><code class="python spaces">        </code><code class="python comments"># List of sprites we can bump against</code></div><div class="line number38 index37 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.level </code><code class="python keyword">=</code> <code class="python color1">None</code></div><div class="line number39 index38 alt2"> </div><div class="line number40 index39 alt1"><code class="python spaces">        </code><code class="python plain">sprite_sheet </code><code class="python keyword">=</code> <code class="python plain">SpriteSheet(</code><code class="python string">"p1_walk.png"</code><code class="python plain">)</code></div><div class="line number41 index40 alt2"><code class="python spaces">        </code><code class="python comments"># Load all the right facing images into a list</code></div><div class="line number42 index41 alt1"><code class="python spaces">        </code><code class="python plain">image </code><code class="python keyword">=</code> <code class="python plain">sprite_sheet.get_image(</code><code class="python value">0</code><code class="python plain">, </code><code class="python value">0</code><code class="python plain">, </code><code class="python value">66</code><code class="python plain">, </code><code class="python value">90</code><code class="python plain">)</code></div><div class="line number43 index42 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.walking_frames_r.append(image)</code></div><div class="line number44 index43 alt1"><code class="python spaces">        </code><code class="python plain">image </code><code class="python keyword">=</code> <code class="python plain">sprite_sheet.get_image(</code><code class="python value">66</code><code class="python plain">, </code><code class="python value">0</code><code class="python plain">, </code><code class="python value">66</code><code class="python plain">, </code><code class="python value">90</code><code class="python plain">)</code></div><div class="line number45 index44 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.walking_frames_r.append(image)</code></div><div class="line number46 index45 alt1"><code class="python spaces">        </code><code class="python plain">image </code><code class="python keyword">=</code> <code class="python plain">sprite_sheet.get_image(</code><code class="python value">132</code><code class="python plain">, </code><code class="python value">0</code><code class="python plain">, </code><code class="python value">67</code><code class="python plain">, </code><code class="python value">90</code><code class="python plain">)</code></div><div class="line number47 index46 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.walking_frames_r.append(image)</code></div><div class="line number48 index47 alt1"><code class="python spaces">        </code><code class="python plain">image </code><code class="python keyword">=</code> <code class="python plain">sprite_sheet.get_image(</code><code class="python value">0</code><code class="python plain">, </code><code class="python value">93</code><code class="python plain">, </code><code class="python value">66</code><code class="python plain">, </code><code class="python value">90</code><code class="python plain">)</code></div><div class="line number49 index48 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.walking_frames_r.append(image)</code></div><div class="line number50 index49 alt1"><code class="python spaces">        </code><code class="python plain">image </code><code class="python keyword">=</code> <code class="python plain">sprite_sheet.get_image(</code><code class="python value">66</code><code class="python plain">, </code><code class="python value">93</code><code class="python plain">, </code><code class="python value">66</code><code class="python plain">, </code><code class="python value">90</code><code class="python plain">)</code></div><div class="line number51 index50 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.walking_frames_r.append(image)</code></div><div class="line number52 index51 alt1"><code class="python spaces">        </code><code class="python plain">image </code><code class="python keyword">=</code> <code class="python plain">sprite_sheet.get_image(</code><code class="python value">132</code><code class="python plain">, </code><code class="python value">93</code><code class="python plain">, </code><code class="python value">72</code><code class="python plain">, </code><code class="python value">90</code><code class="python plain">)</code></div><div class="line number53 index52 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.walking_frames_r.append(image)</code></div><div class="line number54 index53 alt1"><code class="python spaces">        </code><code class="python plain">image </code><code class="python keyword">=</code> <code class="python plain">sprite_sheet.get_image(</code><code class="python value">0</code><code class="python plain">, </code><code class="python value">186</code><code class="python plain">, </code><code class="python value">70</code><code class="python plain">, </code><code class="python value">90</code><code class="python plain">)</code></div><div class="line number55 index54 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.walking_frames_r.append(image)</code></div><div class="line number56 index55 alt1"> </div><div class="line number57 index56 alt2"><code class="python spaces">        </code><code class="python comments"># Load all the right facing images, then flip them</code></div><div class="line number58 index57 alt1"><code class="python spaces">        </code><code class="python comments"># to face left.</code></div><div class="line number59 index58 alt2"><code class="python spaces">        </code><code class="python plain">image </code><code class="python keyword">=</code> <code class="python plain">sprite_sheet.get_image(</code><code class="python value">0</code><code class="python plain">, </code><code class="python value">0</code><code class="python plain">, </code><code class="python value">66</code><code class="python plain">, </code><code class="python value">90</code><code class="python plain">)</code></div><div class="line number60 index59 alt1"><code class="python spaces">        </code><code class="python plain">image </code><code class="python keyword">=</code> <code class="python plain">pygame.transform.flip(image, </code><code class="python color1">True</code><code class="python plain">, </code><code class="python color1">False</code><code class="python plain">)</code></div><div class="line number61 index60 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.walking_frames_l.append(image)</code></div><div class="line number62 index61 alt1"><code class="python spaces">        </code><code class="python plain">image </code><code class="python keyword">=</code> <code class="python plain">sprite_sheet.get_image(</code><code class="python value">66</code><code class="python plain">, </code><code class="python value">0</code><code class="python plain">, </code><code class="python value">66</code><code class="python plain">, </code><code class="python value">90</code><code class="python plain">)</code></div><div class="line number63 index62 alt2"><code class="python spaces">        </code><code class="python plain">image </code><code class="python keyword">=</code> <code class="python plain">pygame.transform.flip(image, </code><code class="python color1">True</code><code class="python plain">, </code><code class="python color1">False</code><code class="python plain">)</code></div><div class="line number64 index63 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.walking_frames_l.append(image)</code></div><div class="line number65 index64 alt2"><code class="python spaces">        </code><code class="python plain">image </code><code class="python keyword">=</code> <code class="python plain">sprite_sheet.get_image(</code><code class="python value">132</code><code class="python plain">, </code><code class="python value">0</code><code class="python plain">, </code><code class="python value">67</code><code class="python plain">, </code><code class="python value">90</code><code class="python plain">)</code></div><div class="line number66 index65 alt1"><code class="python spaces">        </code><code class="python plain">image </code><code class="python keyword">=</code> <code class="python plain">pygame.transform.flip(image, </code><code class="python color1">True</code><code class="python plain">, </code><code class="python color1">False</code><code class="python plain">)</code></div><div class="line number67 index66 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.walking_frames_l.append(image)</code></div><div class="line number68 index67 alt1"><code class="python spaces">        </code><code class="python plain">image </code><code class="python keyword">=</code> <code class="python plain">sprite_sheet.get_image(</code><code class="python value">0</code><code class="python plain">, </code><code class="python value">93</code><code class="python plain">, </code><code class="python value">66</code><code class="python plain">, </code><code class="python value">90</code><code class="python plain">)</code></div><div class="line number69 index68 alt2"><code class="python spaces">        </code><code class="python plain">image </code><code class="python keyword">=</code> <code class="python plain">pygame.transform.flip(image, </code><code class="python color1">True</code><code class="python plain">, </code><code class="python color1">False</code><code class="python plain">)</code></div><div class="line number70 index69 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.walking_frames_l.append(image)</code></div><div class="line number71 index70 alt2"><code class="python spaces">        </code><code class="python plain">image </code><code class="python keyword">=</code> <code class="python plain">sprite_sheet.get_image(</code><code class="python value">66</code><code class="python plain">, </code><code class="python value">93</code><code class="python plain">, </code><code class="python value">66</code><code class="python plain">, </code><code class="python value">90</code><code class="python plain">)</code></div><div class="line number72 index71 alt1"><code class="python spaces">        </code><code class="python plain">image </code><code class="python keyword">=</code> <code class="python plain">pygame.transform.flip(image, </code><code class="python color1">True</code><code class="python plain">, </code><code class="python color1">False</code><code class="python plain">)</code></div><div class="line number73 index72 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.walking_frames_l.append(image)</code></div><div class="line number74 index73 alt1"><code class="python spaces">        </code><code class="python plain">image </code><code class="python keyword">=</code> <code class="python plain">sprite_sheet.get_image(</code><code class="python value">132</code><code class="python plain">, </code><code class="python value">93</code><code class="python plain">, </code><code class="python value">72</code><code class="python plain">, </code><code class="python value">90</code><code class="python plain">)</code></div><div class="line number75 index74 alt2"><code class="python spaces">        </code><code class="python plain">image </code><code class="python keyword">=</code> <code class="python plain">pygame.transform.flip(image, </code><code class="python color1">True</code><code class="python plain">, </code><code class="python color1">False</code><code class="python plain">)</code></div><div class="line number76 index75 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.walking_frames_l.append(image)</code></div><div class="line number77 index76 alt2"><code class="python spaces">        </code><code class="python plain">image </code><code class="python keyword">=</code> <code class="python plain">sprite_sheet.get_image(</code><code class="python value">0</code><code class="python plain">, </code><code class="python value">186</code><code class="python plain">, </code><code class="python value">70</code><code class="python plain">, </code><code class="python value">90</code><code class="python plain">)</code></div><div class="line number78 index77 alt1"><code class="python spaces">        </code><code class="python plain">image </code><code class="python keyword">=</code> <code class="python plain">pygame.transform.flip(image, </code><code class="python color1">True</code><code class="python plain">, </code><code class="python color1">False</code><code class="python plain">)</code></div><div class="line number79 index78 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.walking_frames_l.append(image)</code></div><div class="line number80 index79 alt1"> </div><div class="line number81 index80 alt2"><code class="python spaces">        </code><code class="python comments"># Set the image the player starts with</code></div><div class="line number82 index81 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.image </code><code class="python keyword">=</code> <code class="python color1">self</code><code class="python plain">.walking_frames_r[</code><code class="python value">0</code><code class="python plain">]</code></div><div class="line number83 index82 alt2"> </div><div class="line number84 index83 alt1"><code class="python spaces">        </code><code class="python comments"># Set a reference to the image rect.</code></div><div class="line number85 index84 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.rect </code><code class="python keyword">=</code> <code class="python color1">self</code><code class="python plain">.image.get_rect()</code></div><div class="line number86 index85 alt1"> </div><div class="line number87 index86 alt2"><code class="python spaces">    </code><code class="python keyword">def</code> <code class="python plain">update(</code><code class="python color1">self</code><code class="python plain">):</code></div><div class="line number88 index87 alt1"><code class="python spaces">        </code><code class="python comments">""" Move the player. """</code></div><div class="line number89 index88 alt2"><code class="python spaces">        </code><code class="python comments"># Gravity</code></div><div class="line number90 index89 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.calc_grav()</code></div><div class="line number91 index90 alt2"> </div><div class="line number92 index91 alt1"><code class="python spaces">        </code><code class="python comments"># Move left/right</code></div><div class="line number93 index92 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.rect.x </code><code class="python keyword">+</code><code class="python keyword">=</code> <code class="python color1">self</code><code class="python plain">.change_x</code></div><div class="line number94 index93 alt1"><code class="python spaces">        </code><code class="python plain">pos </code><code class="python keyword">=</code> <code class="python color1">self</code><code class="python plain">.rect.x </code><code class="python keyword">+</code> <code class="python color1">self</code><code class="python plain">.level.world_shift</code></div><div class="line number95 index94 alt2"><code class="python spaces">        </code><code class="python keyword">if</code> <code class="python color1">self</code><code class="python plain">.direction </code><code class="python keyword">=</code><code class="python keyword">=</code> <code class="python string">"R"</code><code class="python plain">:</code></div><div class="line number96 index95 alt1"><code class="python spaces">            </code><code class="python plain">frame </code><code class="python keyword">=</code> <code class="python plain">(pos </code><code class="python keyword">/</code><code class="python keyword">/</code> <code class="python value">30</code><code class="python plain">) </code><code class="python keyword">%</code> <code class="python functions">len</code><code class="python plain">(</code><code class="python color1">self</code><code class="python plain">.walking_frames_r)</code></div><div class="line number97 index96 alt2"><code class="python spaces">            </code><code class="python color1">self</code><code class="python plain">.image </code><code class="python keyword">=</code> <code class="python color1">self</code><code class="python plain">.walking_frames_r[frame]</code></div><div class="line number98 index97 alt1"><code class="python spaces">        </code><code class="python keyword">else</code><code class="python plain">:</code></div><div class="line number99 index98 alt2"><code class="python spaces">            </code><code class="python plain">frame </code><code class="python keyword">=</code> <code class="python plain">(pos </code><code class="python keyword">/</code><code class="python keyword">/</code> <code class="python value">30</code><code class="python plain">) </code><code class="python keyword">%</code> <code class="python functions">len</code><code class="python plain">(</code><code class="python color1">self</code><code class="python plain">.walking_frames_l)</code></div><div class="line number100 index99 alt1"><code class="python spaces">            </code><code class="python color1">self</code><code class="python plain">.image </code><code class="python keyword">=</code> <code class="python color1">self</code><code class="python plain">.walking_frames_l[frame]</code></div><div class="line number101 index100 alt2"> </div><div class="line number102 index101 alt1"><code class="python spaces">        </code><code class="python comments"># See if we hit anything</code></div><div class="line number103 index102 alt2"><code class="python spaces">        </code><code class="python plain">block_hit_list </code><code class="python keyword">=</code> <code class="python plain">pygame.sprite.spritecollide(</code><code class="python color1">self</code><code class="python plain">, </code><code class="python color1">self</code><code class="python plain">.level.platform_list, </code><code class="python color1">False</code><code class="python plain">)</code></div><div class="line number104 index103 alt1"><code class="python spaces">        </code><code class="python keyword">for</code> <code class="python plain">block </code><code class="python keyword">in</code> <code class="python plain">block_hit_list:</code></div><div class="line number105 index104 alt2"><code class="python spaces">            </code><code class="python comments"># If we are moving right,</code></div><div class="line number106 index105 alt1"><code class="python spaces">            </code><code class="python comments"># set our right side to the left side of the item we hit</code></div><div class="line number107 index106 alt2"><code class="python spaces">            </code><code class="python keyword">if</code> <code class="python color1">self</code><code class="python plain">.change_x &gt; </code><code class="python value">0</code><code class="python plain">:</code></div><div class="line number108 index107 alt1"><code class="python spaces">                </code><code class="python color1">self</code><code class="python plain">.rect.right </code><code class="python keyword">=</code> <code class="python plain">block.rect.left</code></div><div class="line number109 index108 alt2"><code class="python spaces">            </code><code class="python keyword">elif</code> <code class="python color1">self</code><code class="python plain">.change_x &lt; </code><code class="python value">0</code><code class="python plain">:</code></div><div class="line number110 index109 alt1"><code class="python spaces">                </code><code class="python comments"># Otherwise if we are moving left, do the opposite.</code></div><div class="line number111 index110 alt2"><code class="python spaces">                </code><code class="python color1">self</code><code class="python plain">.rect.left </code><code class="python keyword">=</code> <code class="python plain">block.rect.right</code></div><div class="line number112 index111 alt1"> </div><div class="line number113 index112 alt2"><code class="python spaces">        </code><code class="python comments"># Move up/down</code></div><div class="line number114 index113 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.rect.y </code><code class="python keyword">+</code><code class="python keyword">=</code> <code class="python color1">self</code><code class="python plain">.change_y</code></div><div class="line number115 index114 alt2"> </div><div class="line number116 index115 alt1"><code class="python spaces">        </code><code class="python comments"># Check and see if we hit anything</code></div><div class="line number117 index116 alt2"><code class="python spaces">        </code><code class="python plain">block_hit_list </code><code class="python keyword">=</code> <code class="python plain">pygame.sprite.spritecollide(</code><code class="python color1">self</code><code class="python plain">, </code><code class="python color1">self</code><code class="python plain">.level.platform_list, </code><code class="python color1">False</code><code class="python plain">)</code></div><div class="line number118 index117 alt1"><code class="python spaces">        </code><code class="python keyword">for</code> <code class="python plain">block </code><code class="python keyword">in</code> <code class="python plain">block_hit_list:</code></div><div class="line number119 index118 alt2"> </div><div class="line number120 index119 alt1"><code class="python spaces">            </code><code class="python comments"># Reset our position based on the top/bottom of the object.</code></div><div class="line number121 index120 alt2"><code class="python spaces">            </code><code class="python keyword">if</code> <code class="python color1">self</code><code class="python plain">.change_y &gt; </code><code class="python value">0</code><code class="python plain">:</code></div><div class="line number122 index121 alt1"><code class="python spaces">                </code><code class="python color1">self</code><code class="python plain">.rect.bottom </code><code class="python keyword">=</code> <code class="python plain">block.rect.top</code></div><div class="line number123 index122 alt2"><code class="python spaces">            </code><code class="python keyword">elif</code> <code class="python color1">self</code><code class="python plain">.change_y &lt; </code><code class="python value">0</code><code class="python plain">:</code></div><div class="line number124 index123 alt1"><code class="python spaces">                </code><code class="python color1">self</code><code class="python plain">.rect.top </code><code class="python keyword">=</code> <code class="python plain">block.rect.bottom</code></div><div class="line number125 index124 alt2"> </div><div class="line number126 index125 alt1"><code class="python spaces">            </code><code class="python comments"># Stop our vertical movement</code></div><div class="line number127 index126 alt2"><code class="python spaces">            </code><code class="python color1">self</code><code class="python plain">.change_y </code><code class="python keyword">=</code> <code class="python value">0</code></div><div class="line number128 index127 alt1"> </div><div class="line number129 index128 alt2"><code class="python spaces">            </code><code class="python keyword">if</code> <code class="python functions">isinstance</code><code class="python plain">(block, MovingPlatform):</code></div><div class="line number130 index129 alt1"><code class="python spaces">                </code><code class="python color1">self</code><code class="python plain">.rect.x </code><code class="python keyword">+</code><code class="python keyword">=</code> <code class="python plain">block.change_x</code></div><div class="line number131 index130 alt2"> </div><div class="line number132 index131 alt1"><code class="python spaces">    </code><code class="python keyword">def</code> <code class="python plain">calc_grav(</code><code class="python color1">self</code><code class="python plain">):</code></div><div class="line number133 index132 alt2"><code class="python spaces">        </code><code class="python comments">""" Calculate effect of gravity. """</code></div><div class="line number134 index133 alt1"><code class="python spaces">        </code><code class="python keyword">if</code> <code class="python color1">self</code><code class="python plain">.change_y </code><code class="python keyword">=</code><code class="python keyword">=</code> <code class="python value">0</code><code class="python plain">:</code></div><div class="line number135 index134 alt2"><code class="python spaces">            </code><code class="python color1">self</code><code class="python plain">.change_y </code><code class="python keyword">=</code> <code class="python value">1</code></div><div class="line number136 index135 alt1"><code class="python spaces">        </code><code class="python keyword">else</code><code class="python plain">:</code></div><div class="line number137 index136 alt2"><code class="python spaces">            </code><code class="python color1">self</code><code class="python plain">.change_y </code><code class="python keyword">+</code><code class="python keyword">=</code> <code class="python plain">.</code><code class="python value">35</code></div><div class="line number138 index137 alt1"> </div><div class="line number139 index138 alt2"><code class="python spaces">        </code><code class="python comments"># See if we are on the ground.</code></div><div class="line number140 index139 alt1"><code class="python spaces">        </code><code class="python keyword">if</code> <code class="python color1">self</code><code class="python plain">.rect.y &gt;</code><code class="python keyword">=</code> <code class="python plain">constants.SCREEN_HEIGHT </code><code class="python keyword">-</code> <code class="python color1">self</code><code class="python plain">.rect.height </code><code class="python keyword">and</code> <code class="python color1">self</code><code class="python plain">.change_y &gt;</code><code class="python keyword">=</code> <code class="python value">0</code><code class="python plain">:</code></div><div class="line number141 index140 alt2"><code class="python spaces">            </code><code class="python color1">self</code><code class="python plain">.change_y </code><code class="python keyword">=</code> <code class="python value">0</code></div><div class="line number142 index141 alt1"><code class="python spaces">            </code><code class="python color1">self</code><code class="python plain">.rect.y </code><code class="python keyword">=</code> <code class="python plain">constants.SCREEN_HEIGHT </code><code class="python keyword">-</code> <code class="python color1">self</code><code class="python plain">.rect.height</code></div><div class="line number143 index142 alt2"> </div><div class="line number144 index143 alt1"><code class="python spaces">    </code><code class="python keyword">def</code> <code class="python plain">jump(</code><code class="python color1">self</code><code class="python plain">):</code></div><div class="line number145 index144 alt2"><code class="python spaces">        </code><code class="python comments">""" Called when user hits 'jump' button. """</code></div><div class="line number146 index145 alt1"> </div><div class="line number147 index146 alt2"><code class="python spaces">        </code><code class="python comments"># move down a bit and see if there is a platform below us.</code></div><div class="line number148 index147 alt1"><code class="python spaces">        </code><code class="python comments"># Move down 2 pixels because it doesn't work well if we only move down 1</code></div><div class="line number149 index148 alt2"><code class="python spaces">        </code><code class="python comments"># when working with a platform moving down.</code></div><div class="line number150 index149 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.rect.y </code><code class="python keyword">+</code><code class="python keyword">=</code> <code class="python value">2</code></div><div class="line number151 index150 alt2"><code class="python spaces">        </code><code class="python plain">platform_hit_list </code><code class="python keyword">=</code> <code class="python plain">pygame.sprite.spritecollide(</code><code class="python color1">self</code><code class="python plain">, </code><code class="python color1">self</code><code class="python plain">.level.platform_list, </code><code class="python color1">False</code><code class="python plain">)</code></div><div class="line number152 index151 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.rect.y </code><code class="python keyword">-</code><code class="python keyword">=</code> <code class="python value">2</code></div><div class="line number153 index152 alt2"> </div><div class="line number154 index153 alt1"><code class="python spaces">        </code><code class="python comments"># If it is ok to jump, set our speed upwards</code></div><div class="line number155 index154 alt2"><code class="python spaces">        </code><code class="python keyword">if</code> <code class="python functions">len</code><code class="python plain">(platform_hit_list) &gt; </code><code class="python value">0</code> <code class="python keyword">or</code> <code class="python color1">self</code><code class="python plain">.rect.bottom &gt;</code><code class="python keyword">=</code> <code class="python plain">constants.SCREEN_HEIGHT:</code></div><div class="line number156 index155 alt1"><code class="python spaces">            </code><code class="python color1">self</code><code class="python plain">.change_y </code><code class="python keyword">=</code> <code class="python keyword">-</code><code class="python value">10</code></div><div class="line number157 index156 alt2"> </div><div class="line number158 index157 alt1"><code class="python spaces">    </code><code class="python comments"># Player-controlled movement:</code></div><div class="line number159 index158 alt2"><code class="python spaces">    </code><code class="python keyword">def</code> <code class="python plain">go_left(</code><code class="python color1">self</code><code class="python plain">):</code></div><div class="line number160 index159 alt1"><code class="python spaces">        </code><code class="python comments">""" Called when the user hits the left arrow. """</code></div><div class="line number161 index160 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.change_x </code><code class="python keyword">=</code> <code class="python keyword">-</code><code class="python value">6</code></div><div class="line number162 index161 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.direction </code><code class="python keyword">=</code> <code class="python string">"L"</code></div><div class="line number163 index162 alt2"> </div><div class="line number164 index163 alt1"><code class="python spaces">    </code><code class="python keyword">def</code> <code class="python plain">go_right(</code><code class="python color1">self</code><code class="python plain">):</code></div><div class="line number165 index164 alt2"><code class="python spaces">        </code><code class="python comments">""" Called when the user hits the right arrow. """</code></div><div class="line number166 index165 alt1"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.change_x </code><code class="python keyword">=</code> <code class="python value">6</code></div><div class="line number167 index166 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.direction </code><code class="python keyword">=</code> <code class="python string">"R"</code></div><div class="line number168 index167 alt1"> </div><div class="line number169 index168 alt2"><code class="python spaces">    </code><code class="python keyword">def</code> <code class="python plain">stop(</code><code class="python color1">self</code><code class="python plain">):</code></div><div class="line number170 index169 alt1"><code class="python spaces">        </code><code class="python comments">""" Called when the user lets off the keyboard. """</code></div><div class="line number171 index170 alt2"><code class="python spaces">        </code><code class="python color1">self</code><code class="python plain">.change_x </code><code class="python keyword">=</code> <code class="python value">0</code></div></div></td></tr></tbody></table></div></div>
<p>This is the main program to run:
</p><p>
<iframe width="640" height="420" src="./source_files/czBDKWJqOao.html" style="border:none;"></iframe></p><div><div id="highlighter_970242" class="syntaxhighlighter  python"><table border="0" cellpadding="0" cellspacing="0"><caption>platform_scroller.py</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div><div class="line number68 index67 alt1">68</div><div class="line number69 index68 alt2">69</div><div class="line number70 index69 alt1">70</div><div class="line number71 index70 alt2">71</div><div class="line number72 index71 alt1">72</div><div class="line number73 index72 alt2">73</div><div class="line number74 index73 alt1">74</div><div class="line number75 index74 alt2">75</div><div class="line number76 index75 alt1">76</div><div class="line number77 index76 alt2">77</div><div class="line number78 index77 alt1">78</div><div class="line number79 index78 alt2">79</div><div class="line number80 index79 alt1">80</div><div class="line number81 index80 alt2">81</div><div class="line number82 index81 alt1">82</div><div class="line number83 index82 alt2">83</div><div class="line number84 index83 alt1">84</div><div class="line number85 index84 alt2">85</div><div class="line number86 index85 alt1">86</div><div class="line number87 index86 alt2">87</div><div class="line number88 index87 alt1">88</div><div class="line number89 index88 alt2">89</div><div class="line number90 index89 alt1">90</div><div class="line number91 index90 alt2">91</div><div class="line number92 index91 alt1">92</div><div class="line number93 index92 alt2">93</div><div class="line number94 index93 alt1">94</div><div class="line number95 index94 alt2">95</div><div class="line number96 index95 alt1">96</div><div class="line number97 index96 alt2">97</div><div class="line number98 index97 alt1">98</div><div class="line number99 index98 alt2">99</div><div class="line number100 index99 alt1">100</div><div class="line number101 index100 alt2">101</div><div class="line number102 index101 alt1">102</div><div class="line number103 index102 alt2">103</div><div class="line number104 index103 alt1">104</div><div class="line number105 index104 alt2">105</div><div class="line number106 index105 alt1">106</div><div class="line number107 index106 alt2">107</div><div class="line number108 index107 alt1">108</div><div class="line number109 index108 alt2">109</div><div class="line number110 index109 alt1">110</div><div class="line number111 index110 alt2">111</div><div class="line number112 index111 alt1">112</div><div class="line number113 index112 alt2">113</div><div class="line number114 index113 alt1">114</div><div class="line number115 index114 alt2">115</div><div class="line number116 index115 alt1">116</div><div class="line number117 index116 alt2">117</div><div class="line number118 index117 alt1">118</div><div class="line number119 index118 alt2">119</div><div class="line number120 index119 alt1">120</div><div class="line number121 index120 alt2">121</div><div class="line number122 index121 alt1">122</div><div class="line number123 index122 alt2">123</div><div class="line number124 index123 alt1">124</div><div class="line number125 index124 alt2">125</div><div class="line number126 index125 alt1">126</div><div class="line number127 index126 alt2">127</div><div class="line number128 index127 alt1">128</div><div class="line number129 index128 alt2">129</div><div class="line number130 index129 alt1">130</div><div class="line number131 index130 alt2">131</div><div class="line number132 index131 alt1">132</div><div class="line number133 index132 alt2">133</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python comments">"""</code></div><div class="line number2 index1 alt1"><code class="python comments">Sample Python/Pygame Programs</code></div><div class="line number3 index2 alt2"><code class="python comments">Simpson College Computer Science</code></div><div class="line number4 index3 alt1"><code class="python comments"><a href="http://programarcadegames.com/">http://programarcadegames.com/</a></code></div><div class="line number5 index4 alt2"><code class="python comments"><a href="http://simpson.edu/computer-science/">http://simpson.edu/computer-science/</a></code></div><div class="line number6 index5 alt1"> </div><div class="line number7 index6 alt2"><code class="python comments">Main module for platform scroller example.</code></div><div class="line number8 index7 alt1"> </div><div class="line number9 index8 alt2"><code class="python comments">From:</code></div><div class="line number10 index9 alt1"><code class="python comments"><a href="http://programarcadegames.com/python_examples/sprite_sheets/">http://programarcadegames.com/python_examples/sprite_sheets/</a></code></div><div class="line number11 index10 alt2"> </div><div class="line number12 index11 alt1"><code class="python comments">Explanation video: <a href="http://youtu.be/czBDKWJqOao">http://youtu.be/czBDKWJqOao</a></code></div><div class="line number13 index12 alt2"> </div><div class="line number14 index13 alt1"><code class="python comments">Part of a series:</code></div><div class="line number15 index14 alt2"><code class="python comments"><a href="http://programarcadegames.com/python_examples/f.php?file=move_with_walls_example.py">http://programarcadegames.com/python_examples/f.php?file=move_with_walls_example.py</a></code></div><div class="line number16 index15 alt1"><code class="python comments"><a href="http://programarcadegames.com/python_examples/f.php?file=maze_runner.py">http://programarcadegames.com/python_examples/f.php?file=maze_runner.py</a></code></div><div class="line number17 index16 alt2"><code class="python comments"><a href="http://programarcadegames.com/python_examples/f.php?file=platform_jumper.py">http://programarcadegames.com/python_examples/f.php?file=platform_jumper.py</a></code></div><div class="line number18 index17 alt1"><code class="python comments"><a href="http://programarcadegames.com/python_examples/f.php?file=platform_scroller.py">http://programarcadegames.com/python_examples/f.php?file=platform_scroller.py</a></code></div><div class="line number19 index18 alt2"><code class="python comments"><a href="http://programarcadegames.com/python_examples/f.php?file=platform_moving.py">http://programarcadegames.com/python_examples/f.php?file=platform_moving.py</a></code></div><div class="line number20 index19 alt1"><code class="python comments"><a href="http://programarcadegames.com/python_examples/sprite_sheets/">http://programarcadegames.com/python_examples/sprite_sheets/</a></code></div><div class="line number21 index20 alt2"> </div><div class="line number22 index21 alt1"><code class="python comments">Game art from Kenney.nl:</code></div><div class="line number23 index22 alt2"><code class="python comments"><a href="http://opengameart.org/content/platformer-art-deluxe">http://opengameart.org/content/platformer-art-deluxe</a></code></div><div class="line number24 index23 alt1"> </div><div class="line number25 index24 alt2"><code class="python comments">"""</code></div><div class="line number26 index25 alt1"> </div><div class="line number27 index26 alt2"><code class="python keyword">import</code> <code class="python plain">pygame</code></div><div class="line number28 index27 alt1"> </div><div class="line number29 index28 alt2"><code class="python keyword">import</code> <code class="python plain">constants</code></div><div class="line number30 index29 alt1"><code class="python keyword">import</code> <code class="python plain">levels</code></div><div class="line number31 index30 alt2"> </div><div class="line number32 index31 alt1"><code class="python keyword">from</code> <code class="python plain">player </code><code class="python keyword">import</code> <code class="python plain">Player</code></div><div class="line number33 index32 alt2"> </div><div class="line number34 index33 alt1"><code class="python keyword">def</code> <code class="python plain">main():</code></div><div class="line number35 index34 alt2"><code class="python spaces">    </code><code class="python comments">""" Main Program """</code></div><div class="line number36 index35 alt1"><code class="python spaces">    </code><code class="python plain">pygame.init()</code></div><div class="line number37 index36 alt2"> </div><div class="line number38 index37 alt1"><code class="python spaces">    </code><code class="python comments"># Set the height and width of the screen</code></div><div class="line number39 index38 alt2"><code class="python spaces">    </code><code class="python plain">size </code><code class="python keyword">=</code> <code class="python plain">[constants.SCREEN_WIDTH, constants.SCREEN_HEIGHT]</code></div><div class="line number40 index39 alt1"><code class="python spaces">    </code><code class="python plain">screen </code><code class="python keyword">=</code> <code class="python plain">pygame.display.set_mode(size)</code></div><div class="line number41 index40 alt2"> </div><div class="line number42 index41 alt1"><code class="python spaces">    </code><code class="python plain">pygame.display.set_caption(</code><code class="python string">"Platformer with sprite sheets"</code><code class="python plain">)</code></div><div class="line number43 index42 alt2"> </div><div class="line number44 index43 alt1"><code class="python spaces">    </code><code class="python comments"># Create the player</code></div><div class="line number45 index44 alt2"><code class="python spaces">    </code><code class="python plain">player </code><code class="python keyword">=</code> <code class="python plain">Player()</code></div><div class="line number46 index45 alt1"> </div><div class="line number47 index46 alt2"><code class="python spaces">    </code><code class="python comments"># Create all the levels</code></div><div class="line number48 index47 alt1"><code class="python spaces">    </code><code class="python plain">level_list </code><code class="python keyword">=</code> <code class="python plain">[]</code></div><div class="line number49 index48 alt2"><code class="python spaces">    </code><code class="python plain">level_list.append(levels.Level_01(player))</code></div><div class="line number50 index49 alt1"><code class="python spaces">    </code><code class="python plain">level_list.append(levels.Level_02(player))</code></div><div class="line number51 index50 alt2"> </div><div class="line number52 index51 alt1"><code class="python spaces">    </code><code class="python comments"># Set the current level</code></div><div class="line number53 index52 alt2"><code class="python spaces">    </code><code class="python plain">current_level_no </code><code class="python keyword">=</code> <code class="python value">0</code></div><div class="line number54 index53 alt1"><code class="python spaces">    </code><code class="python plain">current_level </code><code class="python keyword">=</code> <code class="python plain">level_list[current_level_no]</code></div><div class="line number55 index54 alt2"> </div><div class="line number56 index55 alt1"><code class="python spaces">    </code><code class="python plain">active_sprite_list </code><code class="python keyword">=</code> <code class="python plain">pygame.sprite.Group()</code></div><div class="line number57 index56 alt2"><code class="python spaces">    </code><code class="python plain">player.level </code><code class="python keyword">=</code> <code class="python plain">current_level</code></div><div class="line number58 index57 alt1"> </div><div class="line number59 index58 alt2"><code class="python spaces">    </code><code class="python plain">player.rect.x </code><code class="python keyword">=</code> <code class="python value">340</code></div><div class="line number60 index59 alt1"><code class="python spaces">    </code><code class="python plain">player.rect.y </code><code class="python keyword">=</code> <code class="python plain">constants.SCREEN_HEIGHT </code><code class="python keyword">-</code> <code class="python plain">player.rect.height</code></div><div class="line number61 index60 alt2"><code class="python spaces">    </code><code class="python plain">active_sprite_list.add(player)</code></div><div class="line number62 index61 alt1"> </div><div class="line number63 index62 alt2"><code class="python spaces">    </code><code class="python comments">#Loop until the user clicks the close button.</code></div><div class="line number64 index63 alt1"><code class="python spaces">    </code><code class="python plain">done </code><code class="python keyword">=</code> <code class="python color1">False</code></div><div class="line number65 index64 alt2"> </div><div class="line number66 index65 alt1"><code class="python spaces">    </code><code class="python comments"># Used to manage how fast the screen updates</code></div><div class="line number67 index66 alt2"><code class="python spaces">    </code><code class="python plain">clock </code><code class="python keyword">=</code> <code class="python plain">pygame.time.Clock()</code></div><div class="line number68 index67 alt1"> </div><div class="line number69 index68 alt2"><code class="python spaces">    </code><code class="python comments"># -------- Main Program Loop -----------</code></div><div class="line number70 index69 alt1"><code class="python spaces">    </code><code class="python keyword">while</code> <code class="python keyword">not</code> <code class="python plain">done:</code></div><div class="line number71 index70 alt2"><code class="python spaces">        </code><code class="python keyword">for</code> <code class="python plain">event </code><code class="python keyword">in</code> <code class="python plain">pygame.event.get(): </code><code class="python comments"># User did something</code></div><div class="line number72 index71 alt1"><code class="python spaces">            </code><code class="python keyword">if</code> <code class="python plain">event.</code><code class="python functions">type</code> <code class="python keyword">=</code><code class="python keyword">=</code> <code class="python plain">pygame.QUIT: </code><code class="python comments"># If user clicked close</code></div><div class="line number73 index72 alt2"><code class="python spaces">                </code><code class="python plain">done </code><code class="python keyword">=</code> <code class="python color1">True</code> <code class="python comments"># Flag that we are done so we exit this loop</code></div><div class="line number74 index73 alt1"> </div><div class="line number75 index74 alt2"><code class="python spaces">            </code><code class="python keyword">if</code> <code class="python plain">event.</code><code class="python functions">type</code> <code class="python keyword">=</code><code class="python keyword">=</code> <code class="python plain">pygame.KEYDOWN:</code></div><div class="line number76 index75 alt1"><code class="python spaces">                </code><code class="python keyword">if</code> <code class="python plain">event.key </code><code class="python keyword">=</code><code class="python keyword">=</code> <code class="python plain">pygame.K_LEFT:</code></div><div class="line number77 index76 alt2"><code class="python spaces">                    </code><code class="python plain">player.go_left()</code></div><div class="line number78 index77 alt1"><code class="python spaces">                </code><code class="python keyword">if</code> <code class="python plain">event.key </code><code class="python keyword">=</code><code class="python keyword">=</code> <code class="python plain">pygame.K_RIGHT:</code></div><div class="line number79 index78 alt2"><code class="python spaces">                    </code><code class="python plain">player.go_right()</code></div><div class="line number80 index79 alt1"><code class="python spaces">                </code><code class="python keyword">if</code> <code class="python plain">event.key </code><code class="python keyword">=</code><code class="python keyword">=</code> <code class="python plain">pygame.K_UP:</code></div><div class="line number81 index80 alt2"><code class="python spaces">                    </code><code class="python plain">player.jump()</code></div><div class="line number82 index81 alt1"> </div><div class="line number83 index82 alt2"><code class="python spaces">            </code><code class="python keyword">if</code> <code class="python plain">event.</code><code class="python functions">type</code> <code class="python keyword">=</code><code class="python keyword">=</code> <code class="python plain">pygame.KEYUP:</code></div><div class="line number84 index83 alt1"><code class="python spaces">                </code><code class="python keyword">if</code> <code class="python plain">event.key </code><code class="python keyword">=</code><code class="python keyword">=</code> <code class="python plain">pygame.K_LEFT </code><code class="python keyword">and</code> <code class="python plain">player.change_x &lt; </code><code class="python value">0</code><code class="python plain">:</code></div><div class="line number85 index84 alt2"><code class="python spaces">                    </code><code class="python plain">player.stop()</code></div><div class="line number86 index85 alt1"><code class="python spaces">                </code><code class="python keyword">if</code> <code class="python plain">event.key </code><code class="python keyword">=</code><code class="python keyword">=</code> <code class="python plain">pygame.K_RIGHT </code><code class="python keyword">and</code> <code class="python plain">player.change_x &gt; </code><code class="python value">0</code><code class="python plain">:</code></div><div class="line number87 index86 alt2"><code class="python spaces">                    </code><code class="python plain">player.stop()</code></div><div class="line number88 index87 alt1"> </div><div class="line number89 index88 alt2"><code class="python spaces">        </code><code class="python comments"># Update the player.</code></div><div class="line number90 index89 alt1"><code class="python spaces">        </code><code class="python plain">active_sprite_list.update()</code></div><div class="line number91 index90 alt2"> </div><div class="line number92 index91 alt1"><code class="python spaces">        </code><code class="python comments"># Update items in the level</code></div><div class="line number93 index92 alt2"><code class="python spaces">        </code><code class="python plain">current_level.update()</code></div><div class="line number94 index93 alt1"> </div><div class="line number95 index94 alt2"><code class="python spaces">        </code><code class="python comments"># If the player gets near the right side, shift the world left (-x)</code></div><div class="line number96 index95 alt1"><code class="python spaces">        </code><code class="python keyword">if</code> <code class="python plain">player.rect.right &gt;</code><code class="python keyword">=</code> <code class="python value">500</code><code class="python plain">:</code></div><div class="line number97 index96 alt2"><code class="python spaces">            </code><code class="python plain">diff </code><code class="python keyword">=</code> <code class="python plain">player.rect.right </code><code class="python keyword">-</code> <code class="python value">500</code></div><div class="line number98 index97 alt1"><code class="python spaces">            </code><code class="python plain">player.rect.right </code><code class="python keyword">=</code> <code class="python value">500</code></div><div class="line number99 index98 alt2"><code class="python spaces">            </code><code class="python plain">current_level.shift_world(</code><code class="python keyword">-</code><code class="python plain">diff)</code></div><div class="line number100 index99 alt1"><code class="python spaces"> </code> </div><div class="line number101 index100 alt2"><code class="python spaces">        </code><code class="python comments"># If the player gets near the left side, shift the world right (+x)</code></div><div class="line number102 index101 alt1"><code class="python spaces">        </code><code class="python keyword">if</code> <code class="python plain">player.rect.left &lt;</code><code class="python keyword">=</code> <code class="python value">120</code><code class="python plain">:</code></div><div class="line number103 index102 alt2"><code class="python spaces">            </code><code class="python plain">diff </code><code class="python keyword">=</code> <code class="python value">120</code> <code class="python keyword">-</code> <code class="python plain">player.rect.left</code></div><div class="line number104 index103 alt1"><code class="python spaces">            </code><code class="python plain">player.rect.left </code><code class="python keyword">=</code> <code class="python value">120</code></div><div class="line number105 index104 alt2"><code class="python spaces">            </code><code class="python plain">current_level.shift_world(diff)</code></div><div class="line number106 index105 alt1"> </div><div class="line number107 index106 alt2"><code class="python spaces">        </code><code class="python comments"># If the player gets to the end of the level, go to the next level</code></div><div class="line number108 index107 alt1"><code class="python spaces">        </code><code class="python plain">current_position </code><code class="python keyword">=</code> <code class="python plain">player.rect.x </code><code class="python keyword">+</code> <code class="python plain">current_level.world_shift</code></div><div class="line number109 index108 alt2"><code class="python spaces">        </code><code class="python keyword">if</code> <code class="python plain">current_position &lt; current_level.level_limit:</code></div><div class="line number110 index109 alt1"><code class="python spaces">            </code><code class="python plain">player.rect.x </code><code class="python keyword">=</code> <code class="python value">120</code></div><div class="line number111 index110 alt2"><code class="python spaces">            </code><code class="python keyword">if</code> <code class="python plain">current_level_no &lt; </code><code class="python functions">len</code><code class="python plain">(level_list)</code><code class="python keyword">-</code><code class="python value">1</code><code class="python plain">:</code></div><div class="line number112 index111 alt1"><code class="python spaces">                </code><code class="python plain">current_level_no </code><code class="python keyword">+</code><code class="python keyword">=</code> <code class="python value">1</code></div><div class="line number113 index112 alt2"><code class="python spaces">                </code><code class="python plain">current_level </code><code class="python keyword">=</code> <code class="python plain">level_list[current_level_no]</code></div><div class="line number114 index113 alt1"><code class="python spaces">                </code><code class="python plain">player.level </code><code class="python keyword">=</code> <code class="python plain">current_level</code></div><div class="line number115 index114 alt2"> </div><div class="line number116 index115 alt1"><code class="python spaces">        </code><code class="python comments"># ALL CODE TO DRAW SHOULD GO BELOW THIS COMMENT</code></div><div class="line number117 index116 alt2"><code class="python spaces">        </code><code class="python plain">current_level.draw(screen)</code></div><div class="line number118 index117 alt1"><code class="python spaces">        </code><code class="python plain">active_sprite_list.draw(screen)</code></div><div class="line number119 index118 alt2"> </div><div class="line number120 index119 alt1"><code class="python spaces">        </code><code class="python comments"># ALL CODE TO DRAW SHOULD GO ABOVE THIS COMMENT</code></div><div class="line number121 index120 alt2"> </div><div class="line number122 index121 alt1"><code class="python spaces">        </code><code class="python comments"># Limit to 60 frames per second</code></div><div class="line number123 index122 alt2"><code class="python spaces">        </code><code class="python plain">clock.tick(</code><code class="python value">60</code><code class="python plain">)</code></div><div class="line number124 index123 alt1"> </div><div class="line number125 index124 alt2"><code class="python spaces">        </code><code class="python comments"># Go ahead and update the screen with what we've drawn.</code></div><div class="line number126 index125 alt1"><code class="python spaces">        </code><code class="python plain">pygame.display.flip()</code></div><div class="line number127 index126 alt2"> </div><div class="line number128 index127 alt1"><code class="python spaces">    </code><code class="python comments"># Be IDLE friendly. If you forget this line, the program will 'hang'</code></div><div class="line number129 index128 alt2"><code class="python spaces">    </code><code class="python comments"># on exit.</code></div><div class="line number130 index129 alt1"><code class="python spaces">    </code><code class="python plain">pygame.quit()</code></div><div class="line number131 index130 alt2"> </div><div class="line number132 index131 alt1"><code class="python keyword">if</code> <code class="python plain">__name__ </code><code class="python keyword">=</code><code class="python keyword">=</code> <code class="python string">"__main__"</code><code class="python plain">:</code></div><div class="line number133 index132 alt2"><code class="python spaces">    </code><code class="python plain">main()</code></div></div></td></tr></tbody></table></div></div>
﻿<div class="copyright">Copyright © 2015<br>
<a href="http://programarcadegames.com/index.php?lang=en">English version</a> by <a href="http://simpson.edu/author/pcraven-2/">Paul Vincent Craven</a><br>
<a href="http://programarcadegames.com/index.php?lang=es">Spanish version</a> by Antonio Rodríguez Verdugo<br>
<a href="http://programarcadegames.com/index.php?lang=ru">Russian version</a> by Vladimir Slav<br>
<a href="http://programarcadegames.com/index.php?lang=tr">Turkish version</a> by Güray Yildirim<br>
<a href="http://programarcadegames.com/index.php?lang=pt-br">Portuguese version</a> by <a href="mailto:marquessbr@gmail.com">Armando Marques Sobrinho</a> and Tati Carvalho<br>
<a href="http://programarcadegames.com/index.php?lang=nl">Dutch version</a> by Frank Waegeman<br>
<a href="http://programarcadegames.com/index.php?lang=hu">Hungarian version</a> by Nagy Attila<br>
<a href="http://programarcadegames.com/index.php?lang=fi">Finnish version</a> by Jouko Järvenpää<br>
<a href="http://programarcadegames.com/index.php?lang=fr">French version</a> by Franco Rossi<br>
<a href="http://programarcadegames.com/index.php?lang=ko">Korean version</a> by Kim Zeung-Il<br>
<a href="http://programarcadegames.com/index.php?lang=cn">Chinese version</a> by Kai Lin

</div>


<!-- jQuery -->
<script type="text/javascript" src="./source_files/jquery.min.js"></script>

<!-- Bootstrap -->
<script type="text/javascript" src="./source_files/bootstrap.min.js"></script>

<script type="text/javascript">
$(document).ready(function() {
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.config.space=' ';
    SyntaxHighlighter.all();
});
</script>

<script>
$(document).ready(function() {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-32813432-1', 'auto');
  ga('send', 'pageview');
});
</script>

</body></html>